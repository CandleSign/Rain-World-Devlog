<head>
<title>Rain World Devlog</title>
<link rel="icon" href="/Rain-World-Devlog/Images/Archived Images/ljrr7.jpg">
<style>
a:link {
color:#fab
}
a:visited {
color:#c8a
}
img {
max-width:100%
}
.post {
background-color:#151015ea; border:1px solid #FFFFFF; padding:15px; border-radius: 5px
}
.quoteheader {
font-weight:bold
}
.quote {
background-color:rgba(100,20,90,0.2); border:2px solid #D29
}
.codeheader {
font-weight:bold
}
.code {
background-color:rgba(255,170,187,0.4); border:2px solid #FAB
}</style></head><body style="background-color:#151015; background-image:url(/Rain-World-Devlog/Images/Slugs.png); background-position:center; background-repeat:no-repeat; background-attachment:fixed; background-size:cover; font-family:sans-serif; color:#eee"><span style="background-color:#151015ea"><a href="/Rain-World-Devlog/Pages/025.html">Previous page</a> / <a href="/Rain-World-Devlog/Pages/027.html">Next page</a></span>
<br><br><hr><br><br>
<a name="500"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1000579#msg1000579" target="_blank">JLJac on March 02, 2014, 02:11:59 AM:</a></b></td></table><br>Hahaha yeah the hackmobile didn&#039;t even leave the garage this time XD<br /><br />In Lingo, there was something called a property list. It was basically a little class that was declared on the fly. A declaration could be like this:<br /><br /><div class="codeheader">Code:</div><div class="code">LevelParams = [#CornerRadius : 120, #BottomPadding : 40, #LevelName : &quot;Magma Mayhem&quot;, #TerrainData : gigantic2Darray]</div><br />Then I could just grab anything out of that thing, like this:<br /><div class="codeheader">Code:</div><div class="code">levelTitle.text = LevelParams.LevelName</div><br />This was cool because it enabled me to group my data together by context. I didn&#039;t need to create a new property in the player class for every little parameter that was related to movement, I could just create a <br /><div class="codeheader">Code:</div><div class="code">MoveParams = [#Runspeed : 4.2, #JumpHeight : 2.1, #DefaultMode : &quot;Running&quot;]</div>and everything became a lot less cluttered.<br /><br />Also, talking about tree-like structures, these things could be nested indefinitely. So I could group things, and then access them like<br /><div class="codeheader">Code:</div><div class="code">jmp = MoveParams.JumpParams.DoubleJump.Strength</div>I don&#039;t expect to be able to do this in C#, but if I was able to just group and label the data at all, even if everything in the same container needs to be the same data type, that would be awesome.<br /><br />Dictionaries feel wrong, because they feel like they&#039;re used for searching gigantic databases rather than just grouping three variables together because they&#039;re related. I could create classes for all of those things, but it feels super cumbersome to have a million classes where the majority is just a container that holds two or three properties. <br /><br />Is there some way to accomplish something like this, or is my approach just wrong from a purist programming point of view?<br /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#500">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="501"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1000584#msg1000584" target="_blank">JLJac on March 02, 2014, 02:32:05 AM:</a></b></td></table><br>This seems like the thing for me! Is it similar to <a href="http://www.freewebs.com/campelmxna/HTMLTutorials/Tutorial17HTML.htm" target="_blank"><span style="text-decoration: underline;">this</span></a>? Why is it hacky? &nbsp;<img src="/Rain-World-Devlog/Images/Smileys/whome.gif" alt="Who, Me?" border="0" /><br /><br />I feel a bit confused, to be honest. You can create two classes inside of one class? Where does the code actually go? In the same text file, but where? What is a &quot;namespace&quot;? What is a &quot;dedicated field&quot;?</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#501">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="502"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1001318#msg1001318" target="_blank">JLJac on March 04, 2014, 01:26:32 PM:</a></b></td></table><br>I ended up using the dictionary approach. Just want to once again confirm how incredibly thankful I am to have you guys help me :D<br /><br />The sprite stuff now looks like this - I create an array of sprite containers, and I also have a dictionary where I&#039;ve named each of the positions in that array. In order to not have to fetch both of those variables from the main game class each time, I&#039;ve created a little function that looks as such:<br /><div class="codeheader">Code:</div><div class="code">public FContainer returnFContainer(string index){<br />&nbsp; &nbsp;return SpriteLayers[ spriteLayerIndex[index]];<br />}</div>Where SpriteLayers is the list of FContainers and spriteLayerIndex is the dictionary. Then I can, from the objects, super easily add a sprite to whatever layer I want like this:<br /><div class="codeheader">Code:</div><div class="code">tpGame.returnFContainer(&quot;BkgLayer&quot;).AddChild(spr); </div>It works like a charm <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /> Best thing is that if I want to add a layer in the middle of the stack, I just have to change the dictionary in <i>one </i>place, rather than index numbers in all the objects. As long as the strings are the same, they&#039;ll find their layers!<br /><br />I should probably start a workshop thread... But now I feel like I&#039;m ready to start working on real rain world stuff soon, this learning phase should be more or less over. <br /><br />I&#039;m doing a tiny little learning project, not because I want to waste time not working on rain world, but because I felt that it was better for me to start rain world porting with some tools in the box and some basic knowledge, so I wouldn&#039;t immediately clutter rain world with a bunch of stuff I&#039;d implement just to learn this new environment. Now the test project is done, and the last thing I want to implement is a menu, so there&#039;s somewhere to press &quot;restart&quot; and I can share it with you guys for fun <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /><br /><br />This also brings me to another thing I&#039;d like to learn - someone mentioned creating a little mini class inside a bigger class.<br /><br />My main menu will have four items. All of these have a lot in common, they each hold an FLabel (futile&#039;s text sprites), they should all be selectable, they should all change color when selected, etc. A lot of behavior in common, simply. <br /><br />This calls for a &quot;MenuItem&quot; class. But the &quot;MenuItem&quot; class should only be instanciated and manipulated from inside the &quot;Menu&quot; class. Also it&#039;s a very small class which only holds a few variables and hardly executes any code, so it feels weird to roll out the red carpet and give it an entire text file of its own. Ideally, I&#039;d wanna create some kind of mini class that&#039;s only available from inside the &quot;Menu&quot; class. <br /><br />After searching for &quot;c# nested classes&quot; I think <a href="https://msdn.microsoft.com/en-us/library/ms173120.aspx" target="_blank">this</a> might be the thing, but I just wanted to check with you guys if this practice is considered halal, and if you have some tips or tricks to be considered?</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#502">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="503"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1001321#msg1001321" target="_blank">JLJac on March 05, 2014, 01:04:47 AM:</a></b></td></table><br>Thank you sir&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/gentleman.gif" alt="Gentleman" border="0" /><br /><br />Mini class works super well&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-r.gif" alt="Hand Thumbs Up Right" border="0" /><br /><br />Stupid question #4224:<br /><br />Now both the players and the menu need to take input, so I want to create a FetchInput function where you pass a player number and get the current state of axes + button for that player&#039;s input.<br /><br />Now, the problem is that I want to return both a Vector2 for axes, and a bool for the fire button. Do I have to create a separate text file with an InputData class only to be able to return these two variables in one go? That feels super cumbersome. Also I know that I could bake them together into a Vector3, but that&#039;s a hacky solution that I&#039;m not learning anything from - I want to be able to solve this problem no matter what the data types happen to be.<br /><br />Is there some equivalent of<br /><div class="codeheader">Code:</div><div class="code">public Vector2, bool fetchInput(int playerNum){ <br />return new Vector2(0f, 0f), false;<br />}</div>that I could use? One of my searches suggests returning a KeyValuePair, but that seems like a hack IMO...&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/huh.gif" alt="Huh?" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#503">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="504"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1001870#msg1001870" target="_blank">JLJac on March 06, 2014, 02:13:40 AM (Last Edit: March 06, 2014, 09:44:16 AM):</a></b></td></table><br>I used out paramaters - they&#039;re awesome! I&#039;m learning so much these days my brain almost can&#039;t take it &nbsp;<img src="/Rain-World-Devlog/Images/Smileys/droop.gif" alt="Droop" border="0" /> Why oh why didn&#039;t I start with C# earlier?<br /><br /><a href="https://forums.tigsource.com/index.php?topic=39261.msg1001959#msg1001959" target="_blank">Here&#039;s the test project I&#039;ve made this last week!</a><br /><br />The game has quite a bit of Rain World-like stuff going on in it when it comes to the physics, because I wanted to try that out. What it lacks is levels, loading and saving files, sound, and much more, so I still have stuff to learn &nbsp;<img src="/Rain-World-Devlog/Images/Smileys/shocked.gif" alt="Shocked" border="0" /> But those things I can probably solve as I go - the reason why I made Space Worms was that I needed something simpler to just see if I could get stuff to move on the screen before diving into the depths or RW code. Also I didn&#039;t want to have a lot of junk in there from when I didn&#039;t know very basic stuff, and I did dodge a few of those bullets - for example I wrote myVector[0] instead of myVector.x for a while, and similar stupid things. Not to say that I&#039;m not <i>still </i>doing stupid things that I&#039;ll pull my hair over in a few months, but at least a few of them are out of the way.<br /><br />I think I&#039;m ready to start the porting, actually! &nbsp;<img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-l.gif" alt="Hand Thumbs Up Left" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/epileptic.gif" alt="Epileptic" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-r.gif" alt="Hand Thumbs Up Right" border="0" /><br /><br />I still worry about a few things. <br /><br /><hr /><br />MonoDevelop is slow on my computer, and comes up with stupid autosuggestions once in a while. The Unity console is s**t - it&#039;s not in any way a stranger to just <i>skip </i>logging stuff whenever it feels like it. That could probably be circumvented by creating a custom logger that logs to a text file, maybe? <br /><br />In director I could &quot;watch&quot; an instance and see all of its properties change in real time as the game played. Whenever the game froze because of an error, it would go to where the error occurred in the code, and show what every variable was at the time. If I had for example an array of object instances, I could expand each of them and see what its properties where at. I had a console in which I could write snippets of code and execute them, if the game was running or not. This new environment is clearly inferior when it comes to those debugging assets.<br /><br />Vector graphics and bezier curves, I can do without them but it would be cool to have them. At least simple shapes like square/circle.<br /><br />I haven&#039;t tried sound.<br /><br />I haven&#039;t tried importing graphics (this might be a problem because Futile only takes its weird texture thingies) <br /><br />I don&#039;t know if I can retrieve the color of a pixel into my code with perfect accuracy. (I save level data in the level image file encoded as colors)<br /><br />Futile doesn&#039;t perfectly respect the pixels. An edge that is 2 pixels wide might end up 1 pixel wide in the game (look at the lives bar in the HUD of space worms). This isn&#039;t a super big problem for Rain World which isn&#039;t very pixel art-centric, you won&#039;t see if a perfectly white silhouette is one pixel off. But it&#039;s still very annoying, and might become a real problem with for example the level graphics.<br /><br />If a graphic is shrunk substantially, it will invent edge smoothing colors despite the texture being set to &quot;point&quot;. You can see this on the very small rocks in Space Worms. This can be avoided in all Rain World scenarios I can think of, but is still a very annoying flaw.<br /><br />The game becomes HUUUGE! The code and the graphics of space worms are together less than 200 kb, still the published game occupies <i>147MB</i> before compression and 15MB after compression. Whaaaat?<br /><br /><hr /><br />Maybe I should try to make Space Worms work in Monogame as well - just to see if some of the above problems are absent there? Maybe someone can cue me in on that right away?<br /><br />Thanks again for helping me!</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#504">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="505"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1001998#msg1001998" target="_blank">JLJac on March 06, 2014, 01:00:21 PM:</a></b></td></table><br>Thank you Juan and Jonbro for sorting out some of my concerns. Perhaps I&#039;m a little too harsh at this point considering that I&#039;ve far from explored all the options. <br /><br /><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1001892#msg1001892">Quote from: dancing_dead on March 06, 2014, 03:48:24 AM</a></div><div class="quote">did you, by any chance, have massive white, empty spaces in the tilesets/spritesheets/whatever?<br /></div>This could very well be it. I&#039;ve located the weight to a file called &quot;resources.assets&quot;, which points towards this explanation. Why does it bake everything together in an &quot;assets&quot; file that&#039;s much bigger than the original image file when it could obviously load a normal png just fine before publishing? Also, there is a way to load image files on the fly right, that&#039;s going to be super crucial for Rain World level loading. <br /><br /><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1001892#msg1001892">Quote from: dancing_dead on March 06, 2014, 03:48:24 AM</a></div><div class="quote">You can take a look at Hotline Miami to see how that looks, their sprites rotate and maintain the same &quot;pixelishness&quot; at any rotation.<br /></div>Hahaha this is literally the worst in my opinion &nbsp;<img src="/Rain-World-Devlog/Images/Smileys/tongue.gif" alt="Tongue" border="0" /><br /><br /><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1001892#msg1001892">Quote from: dancing_dead on March 06, 2014, 03:48:24 AM</a></div><div class="quote">Vector graphics/Bezier curves is a tricky challenge, you might need to roll your own custom vector renderer thing with a limited vector graphics subset or something (I hope you don&#039;t need, like, full Illustrator graphics specs support?), but with dedication and time, programming can yield the most wondrous results. Sorry, all I have on offer here is a motivational speech, which might be somewhat demotivating <img src="/Rain-World-Devlog/Images/Smileys/sad.gif" alt="Sad" border="0" /><br /></div>This can be done? Maybe with a shader?<br /><br />What <i>is </i>a shader, btw? Is it all in the GPU? Can I write one myself?</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#505">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="506"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1002018#msg1002018" target="_blank">JLJac on March 06, 2014, 01:35:42 PM:</a></b></td></table><br>Hehe I &quot;can&quot; also climb mount everest, but the question is, <i>can </i>I?</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#506">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="507"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1003995#msg1003995" target="_blank">JLJac on March 12, 2014, 01:26:50 PM:</a></b></td></table><br>Thanks so much again guys&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/toast.gif" alt="Beer!" border="0" /><br /><br /><b>Update 218</b><br />Let&#039;s get back to some devlogging haha!<br /><br />Made two maps for how Rain World c# is looking in my head at the moment. I made them both to clarify my own thoughts, and so that you guys could give me an opinion on it <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /><br /><br />First up are the classes:<br /><br /><a href="/Rain-World-Devlog/Images/Archived Images/structure.jpg" target="_blank"><img src="/Rain-World-Devlog/Images/Archived Images/structure.jpg" alt="" width="200" height="120" border="0" /></a><br /><br />Those are the most basic classes I know I&#039;ll need. Later a lot of new ones will definitely pop up, such as &quot;level loader&quot; etc etc, but this is just what&#039;s needed to run a basic game session.<br /><br />What do you guys think? Am I using inheritance the right way? <br /><br />Then, what I call the &quot;instance tree&quot; or &quot;update tree&quot;:<br /><br /><a href="/Rain-World-Devlog/Images/Archived Images/structure2.jpg" target="_blank"><img src="/Rain-World-Devlog/Images/Archived Images/structure2.jpg" alt="" width="200" height="120" border="0" /></a><br /><br />This is the structure through which the &quot;update&quot; command is forwarded each frame. The general idea is this - objects own each other, and objects further down the hierarchy are dependent on their &quot;masters&quot;. Masters are autonomous. <br /><br />So for example, a lizard has four limbs. It creates them on startup and saves them in an array. The &quot;Room&quot; (which is the class that does most of the game engine stuff) is not aware of these limbs, it just has a reference to the lizard. Every frame, the Main Loop tells the Room to update, the Room tells the Lizard to update, and the Lizard tells each of its Limbs to update. The Room doesn&#039;t need to bother about the Limbs.<br /><br />One thing that might need a special mention is the BodyChunk class. This is basically a physics object, the one that will do collision checking etc. Note that contrary to how many games would do it, the creatures <i>are </i>not physical objects, they <i>have </i>them. This is because of the exact thing that gives Rain World its animation style - that each creature has many segments which makes them soft and bendable. <br /><br />This means that the creature classes (lizard, player, etc) are just coordinators of other instances, and &quot;communication hubs&quot; those instances can use to talk to each other. For example, a lizard will <i>own </i>an instance of LizardAI, and when LizardAI wants to know where the body of that lizard is, it&#039;ll go by the Lizard instance. From inside LizardAI I imagine it might look something like this:<br /><div class="codeheader">Code:</div><div class="code">Vector2 myPosition = parent.bodyChunks[2].pos;</div>where parent is a reference to the Lizard instance, bodyChunks is an array of the BodyChunk instances that Lizard has, and pos is the position of a specific BodyChunk.<br /><br />Similarly I imagine the Room will be a communication hub where difference creatures and objects can find each other. Say that a LizardAI wants to loop through all the items in a room to see if one of them is a spear. Then it could look something like this:<br /><div class="codeheader">Code:</div><div class="code">Spear spear = null;<br />for (i=0; i &lt; parent.currentRoom.objects.Count; i++)<br />{<br />&nbsp; &nbsp;if (parent.currentRoom.objects[i] is Spear){<br />&nbsp; &nbsp; &nbsp; spear = (parent.currentRoom.objects[i] as Spear);<br />&nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp;}<br />}<br /></div>Where parent is the Lizard that owns the LizardAI we&#039;re currently in, currentRoom is a reference to the Room that Lizard is currently in, and object is an array in the Room used to keep track of all the objects.<br /><br />The idea here is that when two things some way out in the branches (LizardAI and Spear) want to communicate, they have to trace their way back to the last common branch (LizardAi -&gt; Lizard -&gt; Room). This is my interpretation of an un-messy way to do things without using globals, and I just wanted to check if you think it looks OK.<br /><br />It just struck me that in the Classes map, creatures, items and effect sprites should probably all inherit from an &quot;updateable object&quot; class that the rooms could hold in arrays and dish out update commands to. Please consider that changed <img src="/Rain-World-Devlog/Images/Smileys/wink.gif" alt="Wink" border="0" /><br /><br />So, what do you guys think? Does it look reasonable? Any critique super welcome&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/grin.gif" alt="Grin" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#507">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="508"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1004255#msg1004255" target="_blank">JLJac on March 13, 2014, 06:57:45 AM:</a></b></td></table><br>@eigenboom: Yeah, that&#039;s a good point - object oriented programming is a tool, not an orthodox religion. For the items it might very well be better to use an in-class solution rather than messing around with a bazillion text files and classes. The limbs have very different behaviors though, the only thing they have in common is basically a &quot;position&quot; parameter and a &quot;owner&quot; parameter, so there the inheritance seems like a good fit. A quick question on that note: The limbs will all have Owners, but some of them will have Owners that are slugcats, some lizards, etc. This makes it difficult for me to decide what to declare the Owner parameter as - if I declare it as a Creature I&#039;ll have to go &quot;(owner as Lizard)&quot; for every single line in the lizard arm, for example, which seems unnecessary as I know that a lizard arm will only be owned by a Lizard. Any ideas for this? Should I declare the Owner variable in the child classes rather than in BodyPart? That seems weird as all of them <i>will </i>have an Owner.<br /><br />For the items, maybe a clean solution would be <a href="http://gameprogrammingpatterns.com/state.html" target="_blank">state classes?</a> Has anyone played with those in c#? I get the general idea, but I have a hard time translating the examples to c# syntax. How do you make this thing work? Do you create an instance of each state class at startup, and have a currentState variable that points to the one that&#039;s currently active? In that case, what would you declare currentState as, as all the states have different classes? If anyone has some more on this design pattern in c# I&#039;d be happy, as I plan to use it for the different &quot;animations&quot; for the creatures as well <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /><br /><br />@Juan: Thanks! Looked up interfaces, and made a (somewhat messy, but working) implementation in Space Worms. It&#039;s very useful! <br /><br />Other question: In the old code, the game held a lot of lists of objects by type in order to be able to easily access them. So for example, I&#039;d have a CreaturesL, a LizardsL, a PlayersL, a SlugcatsL, a PupsL, etc. A player, for example, would appear both in PlayersL and in SlugcatsL, where the latter would also have references to all the pups. This was very useful (sometimes I wanted to check something against players only, and would then repeat through PlayersL, sometimes I wanted to check something against pups and players, and would then use SlugcatsL) but I have a hunch it might be considered impure programming-wise. Is that hunch correct, or can I go ahead with my many not-mutually-exclusive lists?<br /><br />Other other question: For the Game, Hunt, ShortcutHandler instances, should I use singletons? Those seem to be very taboo?</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#508">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="509"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1004925#msg1004925" target="_blank">JLJac on March 15, 2014, 03:04:14 AM:</a></b></td></table><br>Thanks!<br /><br />The reason I used those lists wasn&#039;t mainly optimization, but to make the code cleaner. Instead of looping through all the objects and clutter the loop with conditions, I could just ask for whatever category of object I wanted. <br /><br />But maybe with inheritance I could make the same thing work with only one single if statement? Say that I have Player and Pup classes, and they both inherit from the Slugcat class. Players and Pups are in a huge ObjectL list with all object of all different classes, only sharing an interface. I want to get Players and Pups, but nothing else. Could I use the IS keyword and check for Slugcat?<br /><br /><div class="codeheader">Code:</div><div class="code">for (int i = 0; i &lt; ObjectsL.Count; i++){<br />&nbsp; if (ObjectsL[i] is Slugcat){<br />&nbsp; &nbsp; //do stuff<br />&nbsp; }<br />}<br /></div><br />If that would work it&#039;s a solution that&#039;s clean enough <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /><br /><br /><b>Update 219</b><br /><br />I&#039;ve been researching the state pattern a bit, as I think I will use this <i>a lot</i> in rain world. In the old code I use switch cases on strings, and I use it for everything. AI states, animations, etc etc. This time around I want to do it properly, using the state pattern, which I feel I really like but haven&#039;t quite pinned down yet.<br /><br />I&#039;ve mocked up a little powerup system in Space Worms using the state pattern, and it seems to work well <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /><br /><br />There are a few things I feel weird about though. For example I&#039;ve declared the state classes <i>inside </i>the Player class, as I think of it as a sub-system of the Player. Is this the way most people roll, or do they have an external text file for that stuff? The Player class is becoming rather big.<br /><br />An other thing is that in an example I found, the guy created one instance of each state on start up, and had a currentState variable pointing to which one was active. I have chosen to instead create a new instance of the state when I change it, as it feels weird to have a couple of inactive states hanging around.<br /><br />My idea is this, tell me if it&#039;s wrong: If I change state very often, like, every frame, it might be nice to have one instance of each state hanging around and just point to the active one. Because creating and deleting the state instances every frame would generate garbage. On the other hand, if you change state very seldom (say, once in 30 seconds for space worms powerups) you might as well kill and spawn the state instances, for cleanliness&#039; sake. <br /><br />For Rain World I don&#039;t quite know which approach I&#039;ll be going with yet. For AI I think it would be really cool to have an instance for each state hang around and be inactive, because then the creature could pick up its behavior where it left off once it goes back to it! Say that a Lizard is doing something, like searching through some tiles, and then it is interrupted by some other behavior, like snapping after annoying flies. With the state pattern and consistent instances, I could go back to the search behavior, and the list of tiles searched would be intact - the lizard could just pick up where it left off, like it had a memory! Totally cool!<br /><br />Could maybe combine that with pushdown automata... </div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#509">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="510"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1005763#msg1005763" target="_blank">JLJac on March 17, 2014, 09:57:48 AM:</a></b></td></table><br>I&#039;ll check out this LINQ thing :D<br /><br />@eigenbom, that makes sense, I&#039;ll use static instances then!<br /><br /><b>Update 220</b><br />Copied the Space Worms unity project, re-named a few files, delete quite a few. Gave it a new name: RainWorld. Set up a game class and a main loop. Here we go <img src="/Rain-World-Devlog/Images/Smileys/grin.gif" alt="Grin" border="0" /><br /><br />Then I talked to my friend, who gave me a few general programming tips, and boy am I happy I made Space Worms to filter out the absolute worst of the worst. I&#039;v been doing so many things wrong! Now I have quite a few things to study, and I will really try to keep calm and not get ahead of myself with RW development. Slow and steady takes the day. Most likely I&#039;m still not through my beginner phase (this morning I thought I knew everything there was to know about C#, but then I had that talk with my friend...) so it&#039;s pretty likely that none of the lines I write will still be around in a month or two. But it&#039;s a start!<br /><br />&nbsp;<img src="/Rain-World-Devlog/Images/Smileys/hand-shake-l.gif" alt="Hand Shake Left" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#510">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="511"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1006761#msg1006761" target="_blank">JLJac on March 20, 2014, 08:13:54 AM:</a></b></td></table><br><b>Update 221</b><br /><br />Hi there! I won&#039;t share <i>all </i>of my code hehe, but here&#039;s a sample I&#039;ve written of my Room class so far. If any of you guys feel like looking at it and be my ground control so I&#039;m not floating away into crazyness right from the start, it would be greatly appreciated. Anything I&#039;m doing a weird or peculiar way, let me know! <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /><br /><br />I&#039;m especially interested in if I got the overloading right (GetTile functions). The code executes, but I&#039;d just want to know if I&#039;m using it correctly and as intended. <br /><br />Also, having Tile as a mini class inside Room, good or bad?<br /><br /><div class="codeheader">Code:</div><div class="code">using UnityEngine;<br />using System.Collections;<br />using RWCustom;<br /><br />public class Room<br />{<span style="white-space: pre;"> </span><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>//Setting up properties for width and height of the room, and functions to get height and width as tiles or pixels<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>private int Width;<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>private int Height;<br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public int TileWidth{ get { return Width; } }<br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public int TileHeight{ get { return Height; } }<br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public float PixelWidth{ get { return (float)Width * 20f; } }<br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public float PixelHeight{ get { return (float)Height * 20f; } }<br /><span style="white-space: pre;"> </span><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>//2D array that holds the tiles<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>private Tile[,] Tiles;<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>//DefaultTile is the template tile that occupies any position outside of the room (used when indexes are outside the Tiles array)<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>private Tile DefaultTile;<br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public Room ()<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>{<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>Height = 40;<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>Width = 52;<br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>//Creating Tiles array and filling it with Tile instances<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>Tiles = new Tile[Width, Height];<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>for (int x = 0; x &lt; Width; x++) {<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>for (int y = 0; y &lt; Height; y++) {<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>Tiles [x, y] = new Tile (x, y, Tile.TerrainType.Air);<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>}<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>}<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>//Defining DefaultTile<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>DefaultTile = new Tile (-1, -1, Tile.TerrainType.Air);<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>}<br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public void Update ()<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>{<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>}<br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>// Returns the tile which is occupied by position given as a 2D vector<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public Tile GetTile(Vector2 pos)<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>{<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>return GetTile ((int)(pos.x / 20f), (int)(pos.y / 20f));<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>}<br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>//Returns a tile from Tiles<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public Tile GetTile (int x, int y)<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>{<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>if (x &gt; -1 &amp;&amp; y &gt; -1 &amp;&amp; x &lt; Tiles.GetLength (0) &amp;&amp; y &lt; Tiles.GetLength (1)) {<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>return Tiles [x, y];<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>} else {<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>return DefaultTile;<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>}<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>}<br /><span style="white-space: pre;"> </span><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public class Tile<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>{<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>//Defining enum for terrain types and creating property to hold it<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public enum TerrainType<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>{<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>Air,<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>Solid<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>}<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public TerrainType Terrain{ get; private set; }<br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>//The location of this current tile in in Tiles array<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public int X{ get; private set; }<br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public int Y{ get; private set; }<br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>public Tile (int x, int y, TerrainType tType)<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>{<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>X = x;<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>Y = y;<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>Terrain = tType;<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>}<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>}<br /><br /><br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><br />}<br /><br /><br />//Example command: Debug.Log (Rooms [0].GetTile (new Vector2 (234f, 101.6f)).Terrain);<br />//Output: Air<br />//It seems to work!<br /><br /></div><br />So much fun to have gotten started!</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#511">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="512"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1006776#msg1006776" target="_blank">JLJac on March 20, 2014, 09:06:51 AM:</a></b></td></table><br>Cool! So, what&#039;s the deal with properties? I&#039;ve been told to use them, but I&#039;m still not 100% on why they&#039;re so useful - I can use them to make the get public but the set private, which is cool I guess, but I never really had any problems with accidentally changing numbers from outside, so I don&#039;t think it&#039;s that crucial. And then I can also, in the future, add weird little behaviors whenever a certain property is accessed, (playing a sound when score is increased or something I guess) but I&#039;m not entirely sure I see the usefulness in that either... Like, I don&#039;t want to play the pling EVERY time I change the score, for example it should be quiet if I just restart a game session. So then I might as well play the sound manually when I also add the score, right?&nbsp; <br /><br />Oh, and when I have you here, what&#039;s the deal with naming conventions? The c# documentation seems to be saying different things. At one point they say &quot;no underscores, Pascal capitalization&quot; another time they write in one of their examples something like<br /><br /><div class="codeheader">Code:</div><div class="code">private int _score;<br />public Score{get{return _score;} set{_score = value;}}</div><br />And leave me super confused. They say that I should name properties with Capital Letters, but then I can&#039;t use the same name for a class and an instance, right<br /><div class="codeheader">Code:</div><div class="code">Public Room Room = new Room();</div>that doesn&#039;t work, does it? Then I should call it MyRoom or something, and that seems strange. Can I rely on the case sensitivity and do things like<br /><div class="quoteheader">Quote</div><div class="quote">Room room = new Room();</div>or is that considered unsafe?<br /><br />Tell me how you name stuff <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#512">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="513"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1006815#msg1006815" target="_blank">JLJac on March 20, 2014, 10:50:58 AM:</a></b></td></table><br>Thanks guys! Ok, so I think I&#039;m most comfortable with PascalCase for classes and methods, and camelCase for variables. That way an object can have a method Stun() and a variable int stun, for example.<br /><br />If the only downside to Properties is performance, and they&#039;re preferred over fields for everything else, I&#039;ll go by the &quot;No premature optimization&quot; commandment and use properties until something starts to annoy me by being too slow. It&#039;s not like the game is going to be slower than the lingo version either way haha! </div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#513">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="514"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1006972#msg1006972" target="_blank">jamesprimate on March 20, 2014, 08:23:32 PM:</a></b></td></table><br>you guys are so rad &nbsp; <img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-l.gif" alt="Hand Thumbs Up Left" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-l.gif" alt="Hand Thumbs Up Left" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-l.gif" alt="Hand Thumbs Up Left" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#514">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="515"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1007346#msg1007346" target="_blank">JLJac on March 22, 2014, 01:38:16 AM:</a></b></td></table><br><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1006834#msg1006834">Quote from: Bandreus on March 20, 2014, 11:52:52 AM</a></div><div class="quote">The real reason I don&#039;t like to use getters/setters is code bloat and the fact those are one easy step into overengineering of classes/engine architecture.<br /><br />I never seriously coded anything in C#, but the performance-impact should be similar to what it is in most OO languages. I.e. barely noticeable at all (again, unless in performance critical code, where squeezing out every additional millisecond could actually matter).<br /><br />So don&#039;t overthink these sort of things too much, just roll with whatever you feel most comfortable with and get a feel for whatever you&#039;re using while you&#039;ve your hands right into it&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-l.gif" alt="Hand Thumbs Up Left" border="0" /><br /></div><br />Thanks! I will <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /><br />Actually I have found something that seems pretty annoying with getters/setters, almost to the point where I&#039;m considering not using them. It seems that for a compound variable or whatever you want to call it, such as a vector, you can&#039;t set the sub-varaibles individually. For example I can&#039;t do this:<br /><div class="codeheader">Code:</div><div class="code">bodyChunk.position.x = 5.5f;<br /></div>because it will give me an error message. Instead I have to do this:<br /><div class="codeheader">Code:</div><div class="code">bodyChunk.position = new Vector2(5.5f, bodyChunk.position.y);<br /></div>which is longer, harder to read, generally clunkier and totally rubs me the wrong way with my &quot;it feels like I&#039;m declaring new Vector2&#039;s everywhere, that can&#039;t be good&quot;-complex.<br /><br /><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1006828#msg1006828">Quote from: NicoM on March 20, 2014, 11:47:52 AM</a></div><div class="quote">One great real world use for properties, is to use them to (for instance) only up a speed variable if it is less than a maximum, otherwise set it to the maximum<br /></div>This seems totally valid though! In theory I could use a Mathf.Clamp every time I set the value to achieve the same result, but if I want to change the max or min of that clamp, I&#039;ll be happy if I used a property :S<br /><br /><b>Update 222</b><br />Quite a lot has happened! A basic &quot;creature&quot; (two dots) is in the game. I have the very basics of how a rain world creature works up and running, and this time around I have a much more general and slick framework for it. Basically a creature (or physical object, at the very top of the inheritance tree) consists of a number of BodyChunks, and a number of BodyChunkConnections. The former is the standard unit that builds bodies and moves about with classic newtonian physics, colliding with walls and each other. The latter is the internal bonds that hold the BodyChunks of a specific creature together, so they don&#039;t drift apart. <br /><br />Basic terrain collision is in, but I&#039;m not sure how well it works at this point because I haven&#039;t yet set up tools to test it properly. It&#039;s able to keep an object that moves around with random forces applied within the level boundries, so that&#039;s something. At this point it&#039;s a straight port from the old rain world code, but I think I&#039;ll go over it an re-think parts of it that are a bit whacky. It&#039;s certainly a huge help to have a template to look at when coding though. I don&#039;t have to invent the wheel, merely make it roll.<br /><br />What I&#039;m most proud of though, is my camera system. In previous games, I&#039;ve always had a fairly standard approach to how I do rendering. When an object is created, it asks some kind of sprite engine for a couple of sprites. Then it stores them in a list, and each frame move them around. When deleted, it returns them to the sprite engine or deletes them. <br /><br />Not this time around! My starting point was this - objects shouldn&#039;t be responsible for being visible, they should just exist, and instead there should be a camera <i>viewing </i>them. Instead of having objects take care of their individual sprites, they should just take care of their behaviours, and the sprites should be handled by a self contained camera object. They shouldn&#039;t even know they&#039;re being watched.<br /><br />Why do I want this? Because in the old game, the level you were viewing was the only one that existed. I tried to fake a bit of off-screen movement, but it wasn&#039;t the real deal. This time I want to make everything completely independent on whether it&#039;s being watched. The world should just exist, and the camera should be a ghost moving around watching it. The other big thing is that if I get Futile to work with unity&#039;s split screen, I could have two cameras viewing the same game world.<br /><br />So this is the way I do this: Objects sign up to an IDrawable interface which contains an initiate method and a draw method. The Room has a DrawableObjects list, which contains all objects signed up to that interface. The Camera is assigned to watching a specific Room.<br /><br />Inside the Camera, there&#039;s a sub-class (is that the term? A class defined within another class) called SpriteLeaser. My english wasn&#039;t really sufficient to come up with a good name for this thing, but basically it lends sprites to an object. It consists of only an array of sprites, a reference to an object and a &quot;remove me&quot; flag.<br /><br />Say that the Camera changes rooms. Now it goes through all the drawables of the new room, and for each of them it creates a SpriteLeaser. The SpriteLeaser calls the object&#039;s initiate method, passes itself as a parameter, and says &quot;Hi, I&#039;m a SpriteLeaser at your service!&quot; The object is like &quot;Cool, I&#039;m a Slugcat so I&#039;m gonna need 12 sprites, this sprite should have this graphic, this sprite should have that graphic...&quot; etc. <br /><br />The next frame, the Camera will get its Update method called. Then it will go through all of its SpriteLeasers, and tell each of them to contact their respective objects through the Draw method, once again with themselves passed as a parameter. The object will rearrange the sprites according to its new position, and if it&#039;s slated for removal or in another room than the camera, it will also tell the SpriteLeaser to slate itself for removal. <br /><br />The thing here is that the objects are passive. They don&#039;t take care of sprites, the just passively respond to the initiate and draw commands. If the camera moves to another room, the object won&#039;t even notice. It doesn&#039;t have to do anything, it just stops recieving the Draw commands, which are completely separate from all other code. <br /><br />This was the best solution I could come up with for a self-contained camera and a world that goes about its behaviours with or without being watched. I know I&#039;m probably re-inveting the wheel, but it was really fun doing it! <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#515">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="516"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1007645#msg1007645" target="_blank">JLJac on March 23, 2014, 12:03:37 AM:</a></b></td></table><br>The finite state machine for player animation is becoming humongous... And the player should have <i>two </i>of these, one for &quot;body modes&quot; as well. They&#039;re going to be like, a thousand lines each o.0 Should I separate it into a PlayerAnimation class? <br /><br />It feels weird to have a separate class that&#039;s 100% dependent on another class, and that only exists as one instance per owner. There is no motivation at all to have it as a separate class except from trying to make the text files a bit shorter.<br /><br />What would you guys do?</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#516">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="517"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1007790#msg1007790" target="_blank">JLJac on March 23, 2014, 12:40:52 PM (Last Edit: March 23, 2014, 12:59:13 PM):</a></b></td></table><br>That&#039;s totally true! I&#039;ve been contemplating quite a lot on this stuff, and I really would like to have some kind of general system, because as you say, players and pups share a lot of behaviours.<br /><br /><b>Update 223</b><br />But, hehe, listen to this... So I created this really cool (IMO) finite state machine. It consists of a base class for PlayerAnimations, which has an initiate and an update method, and a lot of derived classes such as PlayerAnimationStandUp etc. It also had an enum with all the animations. <br />And an array PlayerAnimation&#91;] animations. The array holds an instance of each animation derived class (as eigenbom suggested, they&#039;re all alive simultaneously) and the enum is used to map to the array positions, so it&#039;s possible to change the state using a name rather than a weird number.<br /><br /><div class="codeheader">Code:</div><div class="code"><span style="white-space: pre;"> </span><br /><span style="white-space: pre;"> </span>//Array which holds an instance of each state class<br /><span style="white-space: pre;"> </span>public PlayerAnimation&#91;] animations;<br /><br /><span style="white-space: pre;"> </span>//Enum for all the animation states<br /><span style="white-space: pre;"> </span>public enum AnimationIndex<br /><span style="white-space: pre;"> </span>{<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>None,<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>CrawlTurn,<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>StandUp,<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>DownOnFours,<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>LedgeCrawl,<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>HangFromBeam,<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>GetUpOnBeam,<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>StandOnBeam,<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>ClimbOnBeam,<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>BeamTip,<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>Dead<br /><span style="white-space: pre;"> </span>}<br /><span style="white-space: pre;"> </span>public AnimationIndex animation{ get; private set; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; //Changes the Animation<br /><span style="white-space: pre;"> </span>public void ChangeAnimation (AnimationIndex anIndx)<br /><span style="white-space: pre;"> </span>{<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>animation = anIndx;<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>animations [(int)anIndx].Initiate ();<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;}<br /><br /><span style="white-space: pre;"> </span>public void Update ()<br /><span style="white-space: pre;"> </span>{<br /><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>animations [(int)animation].Update ();<br /><span style="white-space: pre;"> </span>}<br /></div>Like this, see? When setting the animations I could use the AnimationIndex enum, and get the names through auto complete, by just mapping the enum to an integer and making sure that a given enum leads to the right animation instance in the array.<br /><br />Super cool!<br /><br />But.<br /><br />Thing #1. No inheritance. I did think long and hard about how I could create inheritance so I could have a general FSM class to inherit from everywhere I needed this behaviour, but what would that class contain? Not the enum, that has to be declared specifically for each implementation. Not the array of states, same goes for that. Basically the only thing I could inherit would be some sort of base class for the states. Almost everything in this solution has to be written again each time I applied this solution.<br /><br />And Thing #2. This whole elaborate solution does nothing that a switch case doesn&#039;t do. Except occupy more memory, being clunkier, and involving more properties. And being unable to access the privates of the owner object because it&#039;s its own class. The only thing it has on the switch case would be being able to run initiate methods for each state, but I don&#039;t have any functionality like that, and if I needed to I could just run a generic init method with its own switch statement in it. <br /><br />Conclusion: The coolest and most elaborate solution might not be the best. Here I really tried for an elegant solution, and ended up creating the opposite. Instead, I&#039;ve found the <i>partial </i>keyword, which allows me to split a class over several text files. So I&#039;m going to go ahead and scrap that fancy FSM, and just create a big, fat switch statement insrtead <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /> </div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#517">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="518"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1008067#msg1008067" target="_blank">JLJac on March 24, 2014, 08:51:10 AM:</a></b></td></table><br>Haha! Ok, so FSM is mostly useful when you have exponential stuff like transition states between all the other states and the like?<br /><br /><b>Update 224</b><br />Converting code! Moved a fat chunk of the player behaviour from the old game to the new one today. Still not entirely there, but it&#039;s looking more like it. Tomorrow I&#039;ll be able to run around and jump on platforms, I think! <br /><br />Some of this code is so horrible to look at you wouldn&#039;t even believe it. Almost all of it is old enough to have moss and fungi growing all over it, for most chunks I have to think long and hard about what they&#039;re actually supposed to do. All of it is just one giant, multi-headed beast of nested if statements. Some pieces sit around doing nothing at all, seemingly, I leave a note at those.<br /><br />Some code looks weird and useless, and but when I run without it there is some bug, and if I introduce it, the bug goes away. In one spot I&#039;ve even left a comment &quot;I don&#039;t remember how this code works, but it prevents this and that problem. So let it be!&quot; Thankfully that&#039;s an exception though, otherwise I&#039;ve been able to figure out what the code is doing after a little bit of tinkering. <br /><br />In either case, I&#039;m always thankful when I stumble upon some strange looking solution and implement it, and it immediately works. It&#039;s so long ago I don&#039;t really remember it, but I can imagine I spent several days in frustration trying to find those solutions, and now I&#039;m really happy to get them for free!</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#518">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="519"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1009031#msg1009031" target="_blank">JLJac on March 26, 2014, 11:09:26 PM:</a></b></td></table><br><b>Update 225</b><br />Trudging along... Don&#039;t get me wrong, I&#039;m having a wonderful time, but my ambition to divide the work into manageable chunks is down the drain. My idea was to first convert the player - but in order to work on the player&#039;s movement behaviors I need to be able to save and load a level, and in order for that to happen I need to understand how to handle XML and text files, etc etc etc. <br /><br /><table style="background-color:#b090a040; border:1px solid #ffffff; padding:5px"><td><img src="/Rain-World-Devlog/Images/LOST IMAGE.png" width="150px" alt="" border="0"/></td></table><br /><br />The biggest convertion push for the player is done though, ie basic terrain interaction. Still have all the behaviors involving poles, and a few other special cases left.<br /><br /><br />Throwing a few questions out there:<br /><br />Currently I&#039;m researching on saving and loading a level from a text file, any general tips on that?<br /><br />Right now my tiles (all the little things that populate the 2d array of a room) are classes. Should I go with structs instead? <br /><br />If I fetch one property of a struct, and it has other, big, properties, does it pass its heavy value-based self through all the methods used to fetch it?<br />Example:<br /><div class="codeheader">Code:</div><div class="code">public struct MyStruct()<br />{<br />public bool verySmallProp;<br />public int[,,,,,,] SUPERBIGPROP;<br />}<br /><br />if (object.anotherObject.thirdObject.fetchMyStruct().verySmallProp){//...}<br /></div>Is the data of SUPERBIGPROP unnecessarily passed as well, slowing everything down? In that case, would a class be quicker? (Which is, to my understanding, reference based and thus not passed at all)<br />I&#039;m asking because every object is asking the surrounding tiles about their status many many times per frame, so I want that to run as smoothly as possible.<br /><br />A tile can have several things on it, such as poles vertically and horizontally, fly hives, etc etc etc. How would you guys store that information? A lot of bools, or a list with tags?</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/026.html#519">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br>
<span style="background-color:#151015ea"><a href="/Rain-World-Devlog/Pages/025.html">Previous page</a> / <a href="/Rain-World-Devlog/Pages/027.html">Next page</a></span></body>