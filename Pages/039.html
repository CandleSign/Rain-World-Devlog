<head>
<title>Rain World Devlog</title>
<link rel="icon" href="/Rain-World-Devlog/Images/Archived Images/ljrr7.jpg">
<style>
a:link {
color:#fab
}
a:visited {
color:#c8a
}
img {
max-width:100%
}
.post {
background-color:#151015ea; border:1px solid #FFFFFF; padding:15px; border-radius: 5px
}
.quoteheader {
font-weight:bold
}
.quote {
background-color:rgba(100,20,90,0.2); border:2px solid #D29
}
.codeheader {
font-weight:bold
}
.code {
background-color:rgba(255,170,187,0.4); border:2px solid #FAB
}</style></head><body style="background-color:#151015; background-image:url(/Rain-World-Devlog/Images/Slugs.png); background-position:center; background-repeat:no-repeat; background-attachment:fixed; background-size:cover; font-family:sans-serif; color:#eee"><span style="background-color:#151015ea"><a href="/Rain-World-Devlog/Pages/038.html">Previous page</a> / <a href="/Rain-World-Devlog/Pages/040.html">Next page</a></span>
<br><br><hr><br><br>
<a name="760"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1068576#msg1068576" target="_blank">JLJac on October 04, 2014, 05:33:55 PM:</a></b></td></table><br>Yup, parallel. The shadows are created with a pretty simple mechanic. As the level is rendered, is saves the depth of each pixel, ie how far into the Z dimension it is.<br /><br />Now we&#039;re in the shader, and we&#039;re rendering a pixel P.<br /><br />What we need to do is find a... let&#039;s call it shadow check coordinate S.<br /><br />S is to the left of and above P. How much to the left and above increases linearly with the <i>depth </i>at P.<br /><br />So if P has a depth of 6, S might be 6 pixels to the left and 6 pixels above P. (Except it&#039;s actually scaled by a factor in the actual game, and can have different angles that are not necessarily 45 degrees)<br /><br />When we have S we do a check whether or not coordinate S is occupied by any sprite. If yes, then coordinate P should be in shadow.<br /><br />What this essentially means is that if a wall is far behind the play layer, the shadows will appear far down to the right of the sprites. If the wall is close, the shadows will appear close to the sprites. But it&#039;s on a per-pixel level, meaning that she shadows can be distorted by different shapes in the background.<br /><br />Simple as that! If you want to do some digging through the thread I think I did this stuff back in May, so there are more details to get there&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-r.gif" alt="Hand Thumbs Up Right" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#760">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="761"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1068601#msg1068601" target="_blank">JLJac on October 04, 2014, 07:49:39 PM:</a></b></td></table><br>Yeah, it&#039;s all done from scratch. I&#039;m using Unity to handle input, it has a very convenient framework where you can just ask if a button is pressed. Also I use the unity engine for some extremely basic stuff such as float maths and random numbers, but I think there are probably a million libraries for that, so it&#039;s not really Unity specific.<br /><br />The main reason why we&#039;re in Unity to begin with is to use its graphics engine to render sprites through the Futile framework. But that&#039;s some pretty basic stuff as well, importing a graphic, declaring a sprite that uses the graphic, that kind of stuff. And I have been digging a tiny little bit into that as well, doing customizations, for example the tails of the creatures are a custom version of the Futile FSprite class.<br /><br />So yeah, I haven&#039;t touched the Unity Editor and it&#039;s all written in C# from scratch. That is cool and all, but it comes with its problems. For example I have my own home brewn &quot;physics engine&quot;, which is not the best all of the time for all scenarios. So, pros and cons. Because on the other hand, if there is a problem in my code, I <i>can </i>attempt to fix it, as the entire code is accessible to me.<br /><br />If I got a fresh start at making games, I&#039;d probably not try to learn how to do everything myself though! I think you can achieve really cool results way more quickly by using for example the Unity Editor and presets. It&#039;s probably a way more efficient work flow, and the code doesn&#039;t end up an obscure nightmare haha!</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#761">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="762"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1068647#msg1068647" target="_blank">JLJac on October 05, 2014, 05:47:08 AM:</a></b></td></table><br>Yeah definitely. The ones shown are the standard palettes, and in those I want to keep the shadows from being distracting - but when the game gets some more areas that are focused more on mood rather than action, there&#039;ll be palettes with much greater contrast between light and shadow, so you really can&#039;t miss it!</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#762">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="763"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1068850#msg1068850" target="_blank">JLJac on October 05, 2014, 02:39:35 PM:</a></b></td></table><br><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1068769#msg1068769">Quote from: fizmat on October 05, 2014, 11:08:57 AM</a></div><div class="quote">Not that it makes any difference, but x^3 and x^4 are still polynomial. Exponential is e^x or 10^x or anything^x<br /></div><br />Oops! I never took maths after ... ugh school systems ... upper secondary perhaps? So I really don&#039;t have the faintest what I&#039;m talking about o.0 Thanks for the correction though!<br /><br />The gif is just a work in progress that looked interesting but was never used. What you&#039;re seeing is a dijkstra map being generated with a completely random next-tile-to-expand-heuristic, and as each new tile is added it traces back to the origin point and increments the values along the way, creating the tree-like structure.<br /><br /><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1068769#msg1068769">Quote from: fizmat on October 05, 2014, 11:08:57 AM</a></div><div class="quote">I say 200kb per map is OK. That&#039;s what, 10-100 megs of RAM for the whole game, considering this will probably end up being the most memory-heavy part of it? <br /><br />The performance question I&#039;d ask is &quot;will all that data (for the currently loaded map) fit in cache?&quot;. And even if it won&#039;t fit, nothing you can do about it. You can&#039;t compress data for cache, that&#039;s like disassembling half your car so it can fit in a parking space closer to home.<br /><br />Programmer time is the most precious resource, don&#039;t hesitate over optimisation: that&#039;s what profiling&#039;s for.<br /><br />Then again, you&#039;re the guy with your own company, I&#039;m just a chump who hasn&#039;t used c++ in 4 years, still hasn&#039;t learned the modern opengl pipeline, and never started his own game. Take everything I tell you as personally untested but comforting-sounding hearsay.<br /></div>Not all rooms will be loaded at the same time, so this is probably not going to be a problem at all. It&#039;s just that it&#039;d feel kinda weird to release a pixelly retro platformer that&#039;s 30GB big and requires a monster of a computer, haha. <br /><br />I guarantee you that my chumpness trumps yours! I&#039;m just a kid to whom a kickstarter happened, and I have no idea what I&#039;m doing. But things seem to be going good enough so far, touch wood!<br /><br /><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1068792#msg1068792">Quote from: iambored2006 on October 05, 2014, 12:25:38 PM</a></div><div class="quote">So you&#039;re not limited to just floor and backwall shadows! Nicely done! I&#039;d love to see some more complex background shapes.<br />Unfortunately, for my own game, I can&#039;t afford going per-pixel like this. I tried to implement dynamic shadows today in the most efficient way I could think of, and yet it still fell flat on its face at ~30 fps. Guess I&#039;ll have to stick to static shadows. I&#039;ll give that earlier material a read, though.<br /><br />Edit: oh, and thank you, of course, for replying! I really appreciate it!&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/toast.gif" alt="Beer!" border="0" /><br /></div>Technically I&#039;m actually limited to <i>only </i>back wall shadows, but all surfaces are built out of several layers of back wall <img src="/Rain-World-Devlog/Images/Smileys/wink.gif" alt="Wink" border="0" /> I think that if you&#039;re doing anything per-pixel, it has to be done in a shader. If you do that stuff on the processor, it&#039;s just too slow. Oh and you don&#039;t need to thank me for bragging about my game haha!&nbsp; &nbsp;<img src="/Rain-World-Devlog/Images/Smileys/crazy.gif" alt="Crazy" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#763">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="764"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1068960#msg1068960" target="_blank">JLJac on October 06, 2014, 12:38:55 AM:</a></b></td></table><br>Thank you so much everyone! Really means a lot to know that the tiny little details I spend hours on are actually noticed!<br /><br />Answering a few questions - <br /><br />No UI won&#039;t be a new game + feature, because it&#039;s the default mode. Maybe we&#039;ll have something like that you can hold down a button and see how many flies you&#039;ve caught so you don&#039;t have to count them, but we&#039;re definitely aiming for an entirely clean screen during gameplay. Inverted RW, heheheh, idk... really breaks canon, that one. But if it&#039;s fun it could be included as a secret or something.<br /><br />Shortcuts - yes, super unclear where they lead at the moment. They are not graphically finished to look like they did in the lingo version, where it was a <i>little </i>clearer because they had little arrows at the entrances and the actual shortcut consisted of black somewhat visible dots, but even back then it was hard to know. This one definitely needs some thinking.<br /><br />Environments - nope, I&#039;ve decided that the environments are going to be completely static. A bit boring, I know, but it was a sacrifice I had to do in order to have the shadows. Also it <i>would </i>have been a technical nightmare. The third reason is that as it&#039;s only me doing animation, it feels reasonable to focus the energy on creature animations. If some flower wiggles as you pass it that might be cool, but it can never convey personality or narrative like creatures, so it feels like more bang for the buck to put my hours there.<br /><br /><b>Update 322</b><br />Now when everyone is excited about the latest kickstarter update, I take the opportunity to do boring stuff! Sneaky like a ninja!<br /><br />So today I fixed some lizard-getting-stuck scenarios. And made blue lizards able to climb slopes that are in the ceiling. Maybe when James wakes up he can undo some of the boring by posting one of the gifs that didn&#039;t end up used in the kickstarter update - where there any cool ones, James?</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#764">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="765"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1068973#msg1068973" target="_blank">JLJac on October 06, 2014, 02:19:21 AM:</a></b></td></table><br>That <i>could </i>be added, but I think I won&#039;t, because it&#039;d be inconsistent to have some such things be static and others be interactive. You never know though, if there is some way to do it stylistically in line with the rest of the game... As for whether all environmental components are in the game - if you mean stuff like plants and chains and other such decorations, of course not! Lots to be added when we get to the Art Phase.</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#765">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="766"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1069003#msg1069003" target="_blank">JLJac on October 06, 2014, 04:34:23 AM:</a></b></td></table><br>Ah! Yeah ok so with that stuff I&#039;m preeeetty happy to keep it simple - I&#039;d rather have a few solid, understandable components and then use creatures to make it interesting. That said we plan a pretty big game world, so it would be weird if not one or two more environmental elements like that snuck in. But it&#039;s not going to be a huge plethora of tile types, rather tiles will be kept pretty plain to set the stage for a plethora of creatures. </div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#766">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="767"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1069221#msg1069221" target="_blank">jamesprimate on October 06, 2014, 04:02:35 PM:</a></b></td></table><br><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1069062#msg1069062">Quote from: Christian on October 06, 2014, 08:41:40 AM</a></div><div class="quote">Nice, some Rain World coverage on Rock Paper Shotgun!<br /><a href="https://www.rockpapershotgun.com/2014/10/06/rain-world-new-engine/" target="_blank">http://www.rockpapershotgun.com/2014/10/06/rain-world-new-engine/</a><br /></div><br />ah thats awesome theyre even paying attention to updates! i dont have the heart to correct them on the game maker thing, but fortunately commenter doomlaser knows whats up!&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/hand-metal-r.gif" alt="Hand Metal Right" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#767">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="768"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1069324#msg1069324" target="_blank">JLJac on October 07, 2014, 01:03:00 AM:</a></b></td></table><br>GifCam!<br /><br /><b>Update 333</b><br /><br />Lizard strikes!<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/mPbKY.gif" alt="" border="0" /><br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/cRguK.gif" alt="" border="0" /><br /><br />There&#039;s quite a lot going on here. In the morning I did the crouch-and-strike behavior you can see, which is also graphically communicated by the head turning black as they&#039;re charging. This is intended to look cool, but is actually mostly a liability to them - if they try this against a moving target they&#039;ll most likely miss, and even though the lunge itself is fast there&#039;s the charging and a speed penalty after as well, making the net speed gain negative in most situations. The lunge is a little bit different between breeds, the green one has more of a bull rush, and the blue one has something akin to a proper jump which it only uses very occasionally (as it&#039;s a pretty safe bet it&#039;ll result in falling to death on any level without a floor).<br /><br />The great technical challenge of the day was something you might not expect though - placing the slugcat between the jaws of the lizard. Now there&#039;s a huge complex system in place where a graphics representation can contain sprite <i>containers </i>as well as sprites, and a system for moving objects into and out of those containers. So the lizard has essentially an entire sprite layer between its upper and lower jaw, and when the player is bitten every player sprite is moved into that layer, while still being moved around by the player object. <br /><br />These Futile sprite containers also nest, which is pretty cool - in theory I think a lizard could be biting a lizard which is biting a lizard which is biting a lizard... <br /><br />Now that the system is in place I think it&#039;s going to be pretty easy to implement similar stuff for other creatures, so if a creature is supposed to eat another, or contain an object nested in its sprites in some other way, there&#039;s a framework for that. One creature can even have several sprite containers, why ever they&#039;d need that. Maybe something with two grabbing hands or something similar.</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#768">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="769"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1069327#msg1069327" target="_blank">jamesprimate on October 07, 2014, 01:11:25 AM:</a></b></td></table><br>Good lord! That is brutal! </div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#769">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="770"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1069658#msg1069658" target="_blank">JLJac on October 08, 2014, 12:46:20 AM:</a></b></td></table><br>Thank you thank you thank you thank you! I&#039;m really pleased with how things are coming together as well <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /> Keep in mind though that I hit record until it looks good - there are some ultra wonky or problematic recordings before I get a really good one, so there are still problems to sort out before the game looks good <i>every</i> time.<br /><br />Jamming lizard mouths open - yeah, the idea has come up a few times, and I do like it. It&#039;s a really classic trope, putting a vertical stick in the mouth of some beast. But gameplay-wise I&#039;m not so sure ... like, if you have the spear, why wouldn&#039;t you just want to spear it? And if you could do both actions, how would the game know which one you wanted? I&#039;m not introducing a new button for that specifically, and it could get annoying if there was some context sensitive thing going on that didn&#039;t always line up with your intentions. We&#039;ll have to see if a natural way to implement it shows up.<br /><br /><b>Update 334</b><br />The goal I set out for today was making lizards carry their prey back to their dens, but that led to a million other things, so now I&#039;m just generally sorting out all sorts of stuff with that original goal in the back of my head. Mostly I&#039;ve been doing stuff that has to do with creatures carrying other creatures. Making it work with shortcuts was somewhat tricky, as well as having it happen between rooms, but those issues are sorted out now. <br /><br />I&#039;ve started on a framework for creatures carrying other creatures in abstract space, which might be pretty cool. For example it means you might be able to enter a room and see a creature carrying another, or have a creature pass through your room with some prey already in its jaws, disinterested in you.<br /><br />To me personally I think this is the most interesting aspect of Rain World - the &quot;terrarium&quot; or living world aspect. The player is a main character in the way that the simulation is run at a finer <i>granularity </i>close to where the player is, but the entire world will be alive and eventful all the time, if you are there or not. This is obviously going to be hard to make into a balanced game, but we&#039;ll try, haha. Dwarf Fortress has a similar philosophy and works pretty well because the game isn&#039;t about winning, but about the stories that develop through the unexpected interactions. We can&#039;t really fall back on that as much because Rain World is more of a traditional game that you play to win, but also we have astronomically fewer moving parts than DF. This is a balance issue we&#039;ll really have to give some close consideration though. Any way I&#039;m really excited that we&#039;re getting closer and closer to having the eco system simulation up and running. <br /><br />One thing that hints that the dynamic food web is getting closer is a little test I did today. After having tested the lizard biting behavior exclusively on the slugcat, today I fired up a green and a blue lizard and told the green one that it finds the blue delicious.<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/URpa.gif" alt="" border="0" /><br /><br />Everything connected flawlessly. The bodies connected, the blue lizard was not allowed to move, it was placed between the jaws of the green lizard, green can grab on to any of the body chunks and keeps its grip there, even the terrain impact bubble effects showed up to give the scene some extra flavor. I&#039;m really hoping this isn&#039;t becoming <i>too </i>brutal, I&#039;m not intentionally trying to make it dark and gritty, I&#039;m just implementing the mechanics and this is how it happens o___0<br /><br />The point is this though; any creature can eat any creature - it&#039;s just one line of code in the relationship declarations away. In the old version something like this would have been a two day nightmare, if not impossible. It&#039;s going to be so much fun when we have more species running around!<br /><br />Edit: This works equally as well apparently :D A bit over the top shaking for such a small prey perhaps ... <br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/Jpkc.gif" alt="" border="0" /><br /><br />Note that I&#039;m not intending to have lizards hunt flies, I&#039;m just trying my &quot;anything can eat anything&quot; setup <img src="/Rain-World-Devlog/Images/Smileys/wink.gif" alt="Wink" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#770">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="771"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1069728#msg1069728" target="_blank">JLJac on October 08, 2014, 05:47:17 AM:</a></b></td></table><br>That&#039;s a really good point ~ I did lower the effect of the weight of the carried creature quite some because otherwise it looked awkward when carrying around the slugcat, but yeah, the blue lizard should be a bit heavier. Maybe I can do some polynomial thing which makes low weights be really low but higher weights increase steeper than linear progression. </div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#771">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="772"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1069967#msg1069967" target="_blank">jamesprimate on October 08, 2014, 04:48:52 PM:</a></b></td></table><br>give us the&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/hand-money-r.gif" alt="Hand Money Right" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/hand-money-l.gif" alt="Hand Money Left" border="0" /> Microsoft! <br /><br />our plate is already pretty full with platforms, but down the road obviously the more places you can play rain world the better. first things first though: make actual game </div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#772">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="773"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1069980#msg1069980" target="_blank">JLJac on October 08, 2014, 05:18:12 PM:</a></b></td></table><br>Could someone with some programming expertise help me out here? I&#039;m having some weird frame rate dips if I add a lot of lizards that have relationships to each other (smooth if they don&#039;t) and I want to know what&#039;s going on.<br /><br />Unity&#039;s profiler says that 98% of the processor power was spent on &quot;RainWorldGame.Update&quot; which is about as helpful as a physician telling you that &quot;Yes you are sick&quot; -.- So I tried using Visual Studios profiler and attaching it to Unity, and everything was really complex in there so I got confused for a while. Then I noticed that the one thing eating all the processor power was something called mono.dll and after trying to research a little bit I kind of think that this is my entire game baked into a single file... Meaning I have the same problem again. I want to profile <i>inside </i>my solution.<br /><br />Building the project as a stand alone and profiling that doesn&#039;t seem to work either - it still just refers to mono.dll. The function in mono.dll that&#039;s called a million times is actually mono.dll, does this mean I have a call stack problem? Some recursive stuff going out of hand? Or is it just that because all my game logic is recognized as mono.dll?<br /><br />And Dear Visual Studio Wizard, when you are reading this, please also tell me why the VS debugger refuses to stop on exceptions? It does stop on break points!</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#773">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="774"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1070008#msg1070008" target="_blank">JLJac on October 08, 2014, 07:02:59 PM (Last Edit: October 08, 2014, 07:37:36 PM):</a></b></td></table><br>That might be it ... but the point isn&#039;t as much this specific problem (I probably could hunt it down manually if I really tried) but that I want to be able to profile my game for the future. It can make the difference between finding some weird frame rate issue in 3 hours or 3 minutes. So even if I could do the 3 hours approach right now, I&#039;d rather think about the long run. <br /><br />Edit: My problem looks similar to <a href="https://blogs.msdn.com/b/profiler/archive/2014/04/05/visual-studio-2012-profiler-on-windows-8-1.aspx" target="_blank">this</a>, so maybe the issue is that I <i>don&#039;t have the symbols</i>, whatever that&#039;s supposed to mean. Haha I&#039;ve really been trying to find out what those &quot;symbols&quot; everyone in VS debugging is talking about is, but... Wikipedia didn&#039;t really help me this time ...</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#774">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="775"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1070114#msg1070114" target="_blank">JLJac on October 09, 2014, 04:07:25 AM:</a></b></td></table><br>Sorry, no update today. The morning I spent talking to James (and we did sort out some pretty important design issues, so that&#039;s a big step forwards!) and the rest of the day was mostly trying to get Visual Studio to comply. At the end of the day, I had managed to make it break on exceptions, but still not take me to the code for proper debugging.<br /><br />@DarkWanderer, yeah, we&#039;ve been thinking about having some corpses as distractions, and it would definitely be a cool mechanic. The question is whether we want to introduce dragging corpses around - it might make the game tedious to be dragging heavy creatures after you half the time. As for attacking injured creatures, that&#039;s a really good idea - I think it could be implemented pretty easily by having the creature&#039;s &quot;scaryness&quot; variable go down with its health. That way some creatures might perceive a specific other creature as scarier than delicious - ie not worth it - until its health drops, and the utility comparer suddenly gives a positive for hunting.<br /><br />@Sebioff, THAAAAAANK YOU, that was the trick! I had clicked on that thing, but while the game was running or something I guess? So when you tipped me off I went back and tried again, and it worked! Also thanks for the article on symbols, now I actually get it! :D :D :D I guess I&#039;ll run Unity for profiling and keep monodevelop up for breaking on exceptions, and then edit my code in VS. One day I dream to do it all in one tool, but now I&#039;m fine with whatever works for a while haha.<br /><br />In case anyone was interested, the frame rate dip was because of the blue lizards fleeing from the green ones. As blue lizards are wall climbers, they have a lot of tiles that are accessible to them but that are not accessible to the greens. Every time they tried to evaluate a tile like that for how dangerous it is, they&#039;d try to ask for the tile closest to that one which was in fact accessible to green lizards. The Find Closest Accessible Tile To This Creature method used a spiral - like, I&#039;d start at the specific tile you wanted to get close to, and move in a square spiral from there until I hit an accessible tile. That&#039;d take quite a few iterations in some cases. Times quite a few path finding ticks every frame, times quite a few blue lizards, times quite a few green lizards... I&#039;m not really certain how to solve it just yet, but now that I know what it is at least I know what to solve! Awesome! </div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#775">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="776"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1070603#msg1070603" target="_blank">JLJac on October 10, 2014, 04:29:22 AM:</a></b></td></table><br>Today&#039;s update isn&#039;t very exciting, so instead you get a ramble on game design! Yay!<br /><br />I think all of these points on dragging are totally valid. In the end I think it wouldn&#039;t do thaaaat much of a difference, because it&#039;s a very slow and deliberate action in a very chaotic game. Any cunning plan like that is pretty much doomed. It&#039;s like that guy who&#039;d try to punch a crate across half the map to block a door in a halo match - cool idea bro, but a million rockets and grenades and burning vehicles are going to wreck your day, and the rest of the game plays in 100 times the pace of your plan and will already have played out when you get there. Rain World is about planning and analyzing, but it&#039;s mostly on a 0.5-5 second scale rather than up in the twenties, or minutes. There are some minute-scale decisions in single player, such as &quot;which area will I go to&quot;, but once those are taken the sub-goals will be much smaller chunks of decision making. <br /><br />Also the game is fairly unpredictable. I know I&#039;ve mentioned this as an issue before (I want the player to be able to feel at least somewhat in control of a situation) and I will work on it, but on a bigger scale it&#039;s such an integral part of the game design that it will just have to be dealt with. Which is something I don&#039;t necessarily view as a bad thing, because I think fun stems from a good combination of random and controllable. Think about tetris, it&#039;s random what blocks you get, but how they behave is completely deterministic. Rain World has a similar dichotomy I think, what creatures are where is hard to know, but how they behave and interact can be learnt and manipulated (or, it will be like that, once I clean out some of the weirdness and randomness). <br /><br />I&#039;m kind of aligned with fizmats idea of animal-level and human-level intelligence here, and that kind of reflects what I mentioned above - the slugcat is intelligent in split second decisions, but doesn&#039;t necessarily prepare elaborate traps. Definitely not crafting. That said though, the slugcat <i>is </i>the player&#039;s avatar, and whatever the player is able to think of the player is able to think of, you can&#039;t get in the way of that.<br /><br />The third factor is something I think of as &quot;world self containedness&quot;. Hmmmm examples. A self contained game world would be Pac Man. In pac man the little pac man creatures are what they are, and they are what they do. Ghosts chase, pac man eats. You don&#039;t really question why they don&#039;t do anything else, because they <i>are </i>what they do and all they are is what they do. You don&#039;t ask yourself why pac man doesn&#039;t try to talk to the ghosts for example, that&#039;s just not in the scope of that world. A non-self contained game world would be GTA. GTA attempts to mimic the real world, and thus its <i>canon </i>suggests more possibilities than its <i>mechanics </i>can provide. In GTA you can find yourself thinking &quot;god why doesn&#039;t he just push the box with his hands&quot; or &quot;if I just had the option to say this thing to this character I could&#039;ve solved this mess&quot; or &quot;why can&#039;t I open the trunk of the car! I want to open the trunk!&quot; or an infinite amount of other things. GTA suggests a world where you could become a painter and spend your days painting abstract art (namely our world, where you can do that) but it doesn&#039;t provide the mechanics. Pac Man suggest a world where only eating is possible, and eating is also what you do.<br /><br />I get the point of both ideas, when doing something movie-inspired like GTA the latter option is obviously preferable. But personally I prefer self-contained worlds. A computer game object is only its actions, and in a self contained game world it should ideally only represent those actions as well. Pac man eats, ghosts chase. I have a bit more technical resources than pac man, so I can make a slightly more complex world, but I want that same tightness of design. I want my creatures to be the things they do, and to be pretty much only that. The slugcat is quick, jumpy, climby, stealthy, nervous, always on the move, hunting and desperate to stay alive at the same time. The lizard is lazy and slow until it spots prey, then suddenly determined and persistent, making every single move in order to achieve the goal of reaching the other creature. The fly is a bit goofy, concentrated on its own business which is kind of obscure what it is, but suddenly panicking in order to preserve itself, especially when the behavior is amplified throughout a group. <br /><br />Those concepts are realized through the actions - jumping, climbing, running, flying, chasing. The animation is then intended to amplify these hinted personalities further, but is always based on the actual game-relevant interactions. The slugcat for example has a nervous gaze switching from object to object, similar to the personality its behavior suggests - never really focused on a goal, but always determining the situation in this very now. &quot;Was I one millimeter from death half a second ago? That&#039;s irrelevant now, because now I have a 0.3 second window to catch this prey, so I better give it a shot!&quot; The lizard on the contrary is goal focused - staring down its target with tunnel vision, only giving other creatures a quick glance as they appear in order to make a swift calculation whether it might be worth it to switch target. <br /><br />The idea is that interactions added should be in line with these personalities - further defining the creature using the things it <i>does </i>as building blocks. The slugcat shouldn&#039;t play basket ball, craft a gun or run for president. It would be out of character. And worse, it would break the self-containedness. If you can craft a gun, why can&#039;t you make a car? Suddenly it becomes obvious that the limitation is not the edge of this <i>world</i>, but of what I could be bothered to code when making this <i>game</i>. Willing suspension of disbelief punctured!<br /><br />Dragging a corpse as a bait? Maybe! It could definitely be a part of the slugcat skill set. It&#039;s not vastly out of character, just maybe a little, as it suggests thinking several minutes ahead, which we haven&#039;t seen much of so far. But if it does add to the game, or if it could be done as a more on-the-spot action rather than a lengthy and deliberate one, it could even be a welcome nudge in a new direction for the character. Giving it more depth! But, as you can tell if you made it this far, there are several things to take into consideration when adding something like this.<br /><br />That&#039;s what&#039;s going on in my head when I think about what new features might be like!<br /><br /><b>Update 335</b><br />Sent an email to UnityVS guys and got an answer that they simply don&#039;t support break on exception, so it wasn&#039;t that weird after all&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/tired.gif" alt="Tired" border="0" /><br /><br />In other news, creatures carrying other creatures (and inanimate objects) through abstract space, into abstract space, and out of abstract space, is now done! It&#039;s actually a pretty huge step, but it&#039;s not really the gifable kind - it looks like leaving a room and then when you go back into it everything is where it was and nothing has happened.&nbsp; <br /><img src="/Rain-World-Devlog/Images/Smileys/hand-shake-l.gif" alt="Hand Shake Left" border="0" />&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/cheesy.gif" alt="Cheesy" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/hand-shake-r.gif" alt="Hand Shake Right" border="0" /><br /><br />The system supports carrying of creatures carrying creatures carrying creatures etc. So you might see a lizard carrying a lizard carrying a slugcat carrying two flies hahaha! <br /><br />There was some trickyness to this, because when a creature carrying another creature exits a room, it pulls that creature with it. This means that I wasn&#039;t able to resort to the classical iterate-over-the-list-backwards solution when updating creatures in rooms, because they were not certain to only remove themselves, but could pull any random chunk of other creatures with them from both before and after themselves in the list. You code people, if you could give my solution a quick glance and tell me if it looks OK?<br /><br /><div class="codeheader">Code:</div><div class="code">&nbsp; &nbsp; private List&lt;AbstractWorldEntity&gt; entities;<br />&nbsp; &nbsp; private bool evenUpdate;<br />&nbsp; &nbsp; private int roomIndex;<br /><br />&nbsp; &nbsp; public void Update(int timePassed)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; evenUpdate = !evenUpdate;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; bool allEntetiesUpdated = false;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; while (!allEntetiesUpdated) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; allEntetiesUpdated = true;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (AbstractWorldEntity ent in entities) if (ent.evenUpdate != evenUpdate) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ent.evenUpdate = evenUpdate;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ent.Update(timePassed);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (ent.pos.room != roomIndex) { allEntetiesUpdated = false; break; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br /></div><br />This is in the room class. What I want to do is update each entity in entities <i>once</i>, but what I need to account for is that the update call might remove the entity and any number of other entities from the list.<br /><br />In English, my solution is this: I iterate over the entities list and update each entity, setting a bool in them so I know I&#039;ve updated them this frame. After each, I check if it&#039;s still in this room, or if it has moved out. If it has moved out, I break the loop, and start it all over again, once again iterating over all the entities. But because those already updated has the bool set, they don&#039;t get a second update command. I repeat this until I have been able to iterate over the entire list without any breaks. <br /><br />Should about do it, right? Let me know if there&#039;s any problem I didn&#039;t think of.</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#776">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="777"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1071403#msg1071403" target="_blank">JLJac on October 12, 2014, 04:06:49 PM:</a></b></td></table><br>The slightly weird mechanic is because I&#039;ve been prepping for a potentially very large world. Each room will keep track of what time it was when it had its last update command, and when it get a new one it&#039;ll calculate a delta which is passed down to the abstract creatures. The creatures will use that to increment their counters and to calculate some chance-based stuff, such as the probability of two creatures in the same room encountering each other. For example, if a creature wants to move out an exit it needs to wait a corresponding amount to the distance to that exit before it can do the move. This way the idea is that the abstract world will be able to function even at a very low or irregular update rate, which might be cool if the world is large and we want to update areas close to the player with a finer granularity. This is also why the room owns the &quot;evenness&quot; parameter - all rooms are not updated at the same time with the same evenness, that&#039;s the idea of this whole architecture.<br /><br />Yeah, carried creatures might or might not get an update - but as you say, they don&#039;t have much agency so that&#039;s perhaps not a big problem. What&#039;s worse is the other one you mention, that a creature could potentially surf a wave of updates by moving between rooms. From a strict gameplay perspective I don&#039;t think it would matter all that much (all of the abstract space feels pretty fuzzy to the player) but from a purity standpoint it feels pretty bad, yeah.<br /><br />Maybe I could move the &quot;keep track of how long ago I got my last update&quot; down to the creature level instead... That way they could get two updates quickly after each other, but the second one wouldn&#039;t really have any &quot;juice&quot; to it as the calculated delta would be very small. <br /><br />What is it, saving the milliseconds since 1970 is just a long int right, and that&#039;d be just the same size as 2 regular ints? So saving time as 40ths of a second would be pretty mild on the memory and without any risk of the ints actually hitting the ceiling?</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#777">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="778"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1071489#msg1071489" target="_blank">JLJac on October 13, 2014, 12:21:43 AM:</a></b></td></table><br><b>Update 336</b><br />Den awareness! The lizards (and other future creatures) can now keep track of a home den. If they don&#039;t have one, there&#039;s a routine that looks for the closest one throughout the world map. Whenever the lizard re-maps movement territory (&quot;it seems I&#039;m in a tile that I had mapped as inaccessible, I should do a new flood fill to check what tiles are actually accessible to me&quot;) it also restarts this routine. If the routine runs out of options, it&#039;ll tell the lizard that it&#039;s stranded - in an area from where it can not reach any den. I think it could be pretty cool to have creatures panic if they&#039;re in this situation when the rain comes. Otherwise, it finds a new den and remembers that one as its home base instead.<br /><br />Here&#039;s a lizard catching a slugcat and heading back home with it. Excuse the slugcat being on top of the lizard&#039;s snout in the later rooms, I haven&#039;t gotten around to moving it in there for situations where the grasp exists on spawning the creatures.<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/nr6S.gif" alt="" border="0" /><br /><br />As always in Rain World it&#039;s assumed that the AI entity is omniscient about the level geometry - having them be unsure of what&#039;s where would be a nightmare to program and it would pretty much only amount in obscuring the intelligent behaviors I&#039;ve painstakingly put in. <br /><br />Also, I now theoretically have support for fleeing from rain! It was really simple, I just added another Utility to the lizards decision making machinery. Currently I have it following this Urgency/Utility curve over time as the rain approaches:<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/JLB1Z.png" alt="" border="0" /><br /><br />But I think that in the future it would probably make sense for it to take distance from the den into account instead of only time. It should probably be a simple division, how far am I from home / how much time is there left. So, more refinements to come, but the basic behavior is in.<br /><br />What&#039;s not in though, is creatures actually being able to <i>be </i>in dens. Now they just weirdly pop in and out of them over and over again. I think this won&#039;t be a huge task though (touch wood), I&#039;ll just keep them in &quot;shortcut mode&quot; while allowing them to interact with some sort of Inside Of Den class, which can allow them to drop off some food, wait for a bit, or whatever it is they want to do. <br /><br />It seems it&#039;s not far away that we have the player hunting and fleeing, and AI creatures hunting, fleeing and taking cover from the rain! That&#039;d be the most basic gameplay mechanics, all working and interacting with each other!</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#778">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="779"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1071595#msg1071595" target="_blank">jamesprimate on October 13, 2014, 06:45:08 AM:</a></b></td></table><br>if you think that&#039;s wonky you haven&#039;t seen nothin yet!&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/wink.gif" alt="Wink" border="0" /> <br /><br />Don&#039;t worry, that one is just the &quot;abstracted room&quot; overlay showing activity in adjacent rooms. For game &quot;debugging&quot; purposes (seems weird to say that), there are a LOT of ad-hoc HUDs hooked up for showing various information, but there won&#039;t be HUDs of any sort in the game (if we can do our jobs right!), so no reason for them not to be ugly and wonky&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-l.gif" alt="Hand Thumbs Up Left" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/039.html#779">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br>
<span style="background-color:#151015ea"><a href="/Rain-World-Devlog/Pages/038.html">Previous page</a> / <a href="/Rain-World-Devlog/Pages/040.html">Next page</a></span></body>