<head>
<title>Rain World Devlog</title>
<link rel="icon" href="/Rain-World-Devlog/Images/Archived Images/ljrr7.jpg">
<style>
a:link {
color:#fab
}
a:visited {
color:#c8a
}
img {
max-width:100%
}
.post {
background-color:#151015ea; border:1px solid #FFFFFF; padding:15px; border-radius: 5px
}
.quoteheader {
font-weight:bold
}
.quote {
background-color:rgba(100,20,90,0.2); border:2px solid #D29
}
.codeheader {
font-weight:bold
}
.code {
background-color:rgba(255,170,187,0.4); border:2px solid #FAB
}</style></head><body style="background-color:#151015; background-image:url(/Rain-World-Devlog/Images/Slugs.png); background-position:center; background-repeat:no-repeat; background-attachment:fixed; background-size:cover; font-family:sans-serif; color:#eee"><span style="background-color:#151015ea"><a href="/Rain-World-Devlog/Pages/036.html">Previous page</a> / <a href="/Rain-World-Devlog/Pages/038.html">Next page</a></span>
<br><br><hr><br><br>
<a name="720"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1060220#msg1060220" target="_blank">JLJac on September 10, 2014, 11:40:52 PM:</a></b></td></table><br>Hahahaha if you guys didn&#039;t notice the blinking heads until I mentioned them, maybe they&#039;re not that big of an aesthetical disaster after all &nbsp;<br /><img src="/Rain-World-Devlog/Images/Smileys/tongue.gif" alt="Tongue" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/tongue.gif" alt="Tongue" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/tongue.gif" alt="Tongue" border="0" /><br /><br />I agree that something has gone missing in the smoothness of the new build though. Research will be directed at finding out exactly what!<br /><br /><b>Update 305</b><br />Dead end mapper! I think I&#039;ve managed to identify dead ends pretty well today, stay tuned for a million screenshots so you can judge for yourself!<br /><br />When generating these I disabled short cuts to make it &quot;what you see is what you get&quot; - there&#039;re no secret passages between tiles, so what looks like a dead end in the image is actually a dead end. If this is confusing to you let me know and I&#039;ll try to explain better. Some images have something that looks like a very obvious dead end but is greener than anything else - those are room exits.<br /><br />Essentially the way to read these pictures is that red is considered a dead end and green is considered a good area to be in in regards to not being cornered. The AI behavior I have in mind will be able to use these maps for a few things, but I guess the gist of it should be that if you&#039;re being chased, gravitate towards greener areas rather than running into the red. If your tile is redder than the tile of the threat, you&#039;re probably being cornered and it would be a good idea to find a path back to greener pastures.<br /><br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/XwmLC.png" alt="" border="0" /><br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/uebdf.png" alt="" border="0" /><br /><br />Same level mapped for Fly and Slugcat respectively. The fly obviously has access to air tiles, while the slugcat is stuck on the ground.<br /><br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/Yi6Ld.png" alt="" border="0" /><br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/qsxJh.png" alt="" border="0" /><br /><br />See the pink tiles? Those are &quot;fleeing targets&quot;, essentially tiles that are A - in &quot;hub&quot; areas from where you can get to other areas without being cornered and B - somewhat evenly spaced. These are few and well defined for a reason - when a fleeing AI doesn&#039;t know where to go, it is supposed to be able to evaluate those one by one. Which one of them is closest to me? Which one is the furthest from the threat? Which one of them can I path to without the path intersecting with my threat? <br /><br />In the difficult scenario of knowing where you want to get away from, but not where you&#039;re going, these fleeing targets might give a clue. If you arrive at your fleeing target and still feel panicked you can just pick another one and run around between them at random - you&#039;re at least guaranteed not to end up in a dead end.<br /><br /><br />Here&#039;s a little comparison - the same map, mapped for the fly creature, with shortcuts turned on and off:<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/sdwFm.gif" alt="" border="0" /><br /><br />The rooms on the left each have a shortcut in them. Note how when the shortcuts are turned off these rooms are pretty much completely considered dead ends, no self-preserving creature would allow itself to get chased in there. When the shortcuts are on, however, they get a path through them, making them more considerable as fleeing destinations.<br /><br />Last for today, a thing that I&#039;m not keeping but which ended up looking pretty cool - I tried to have the algorithm grow at random, and the effect ended up looking like a tesla coil, or veins:<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/NeFOQ.gif" alt="" border="0" /><br /><br />Edit: Just came to think of it, room exits should obviously have a fleeing target each as well.</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#720">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="721"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1060231#msg1060231" target="_blank">jamesprimate on September 11, 2014, 01:49:27 AM:</a></b></td></table><br>THIS. UPDATE. IS. AWESOME.</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#721">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="722"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1060542#msg1060542" target="_blank">JLJac on September 11, 2014, 10:06:27 PM:</a></b></td></table><br>Ok, so here&#039;s a technical question.<br /><br />These maps take too long to calculate, so I&#039;ll just do it once on the first time the level is loaded, the write it back to the level file and have it hang out there.<br /><br />When I calculate these maps a by-product of that process is a dijkstra map for each exit in the room as calculated for each creature. This is really useful info to the AI, it could do a lot more and a lot faster if it had access to it. Sooo, I&#039;m thinking about perhaps storing that as well, when I&#039;m at it?<br /><br />Say that a standard level is 50*40 = 2 000 tiles.<br /><br />Say that I end up with worst case 15 creature types that need to do these calculations. Some creatures share maps as they have the same basic movement, so it&#039;ll probably not be that much.<br /><br />Say that a room has 4 exits, all of which I&#039;m saving a map for. Then I&#039;m also saving the dead end map, so 5 maps all in all.<br /><br />2000 * 15 * 5 = 150 000<br /><br />So, a hundred and fifty thousand integers. If the level is bigger, or there are more exits, that number could be even more crazy. If the level is 100*80 instead, we end up at 600 000 integers.<br /><br />The level text file I have currently is at something like 4kb, and contains something like 3000 integers to store the level geometry. So by that estimation a 150 000 integer level would end up at... 200kb. That doesn&#039;t seem too bad? Modern computers have gigabytes of RAM, they should be able to hold those amounts of data? The bigger level ends up at about a meg. <br /><br />What do you guys think? Is this viable? It seems like such massive numbers. It also kind of is a waste, as not all creatures are in all levels. Also, if you look at the screenshots above you&#039;ll notice how in the most cases the majority of tiles are not accessible, meaning that a majority of these numbers would just be zeroes.<br /><br />When loading a level its text content is held in memory, then converted to rain world code objects. Then that text is discarded. Is that a huge hit for garbage collection? When the game starts up each level is loaded once to retrieve some data from it, and if there are hundreds of levels I worry GC could get overwhelmed.<br /><br />Is having all those integers in memory during play a performance problem in itself?<br /><br />Thankful for all advice!</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#722">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="723"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1060546#msg1060546" target="_blank">JLJac on September 11, 2014, 10:31:13 PM:</a></b></td></table><br>Just struck me that I could do a very easy compression of the maps by just going tile by tile and only saving them if they are indeed mapped, leaving out the blacked out terrain. Then when I write the data back, I just go by the same order. It seems from my tests that this would get the amount of integers down well below 30% in the level layouts I have going now.<br /><br />I could probably do with dijkstra maps that are just tile-by-tile rather than creature specific as well - not AS good, but still an asset to the AI. Then I would not have 15 * 5 maps to save, but just 15 + 5 = 20. <br /><br />(15 + 5) * 2000 * 30% = 12 000 integers<br /><br />That shouldn&#039;t be a major problem, right?</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#723">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="724"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1060572#msg1060572" target="_blank">JLJac on September 12, 2014, 12:36:27 AM:</a></b></td></table><br><b>Update 306</b><br />Well, most of the day was spent in hesitation over above issues - I did some calculating back and forth but that obviously didn&#039;t help me much as I do realize that what I think of as &quot;big numbers&quot; or &quot;small numbers&quot; is irrelevant to the scope a computer. I didn&#039;t want to start implementing it without knowing it was going to be an actual realistic solution, so I kept away from it and did some other poking around today.<br /><br />For example I made the dead end mapper use the creatures&#039; terrain preferences rather than a first-best grab of tiles, meaning that now the maps will hopefully gravitate a bit towards terrain that the creature is comfortable with.<br /><br />Another thing I did which has been a long time coming was implementing a terrain proximity map in the common AI map:<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/mqCre.png" alt="" border="0" /><br /><br />Any flying creature will be very thankful to have this info, as it allows it to know what&#039;s open air and what&#039;s uncomfortable tight spaces. Also, if we want to add a creature bigger than 1 tile wide, this allows that creature to know where it can move. <br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/Z4fpv.png" alt="" border="0" /><br /><br />Here&#039;s a dead end map for the fly with a preference to stay away from walls, looks pretty reasonable for a fleeing behavior for a flying creature right? Given that those bottom two corridors are room exits, otherwise it shouldn&#039;t have anything to do down there.</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#724">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="725"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1061217#msg1061217" target="_blank">jamesprimate on September 14, 2014, 01:23:57 AM:</a></b></td></table><br><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1061153#msg1061153">Quote from: absenter on September 13, 2014, 05:06:27 PM</a></div><div class="quote">I had a chance to play this game briefly at BostonFIG. It looks as incredible in person as the GIFs we&#039;ve been seeing. I must admit, I felt like I was terrible at playing it. I&#039;m excited to spend more time playing it when it comes out and getting a chance to learn to play it better! Very cool!<br /></div><br />yo! was nice meeting you! thanks for stopping by and hanging out<br /><br />TIG was pretty well represented at BostonFIG. i think i met more forum people there then all PAXs combined. i guess that makes sense with the indie game focus, but still seems surprising considering how much smaller it is.<br /><br />on a similar note, the RW booth was NUTS. we had a crowd for 8hrs straight doing constant 4 player matches. Its possible we had more people playing it in one day at BFIG than 4 days at PAX Prime. and that was with the most slap-dash, ghetto &quot;booth&quot; setup possible&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/tongue.gif" alt="Tongue" border="0" /><br /><br /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#725">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="726"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1061402#msg1061402" target="_blank">JLJac on September 14, 2014, 04:08:59 PM (Last Edit: September 14, 2014, 04:33:04 PM):</a></b></td></table><br>Hi!<br /><br />I usually don&#039;t work in the weekend, as I think a five day week is probably the better option in the long run, but this time I made an exception and did some polishing on the dead end mapper. Now it works like I originally intended it to - actually finding loops, and from every loop drawing a connection to every exit. Tonight when I do my actual update I&#039;ll throw an image of the slightly improved dead end mapper in there.<br /><br />@ Sebioff, Jimbert, thanks! Just needed a reality check. I might as well implement those solutions then, if something like a million integers isn&#039;t necessarily a problem. I have been looking into Sparse Arrays some, as I think I could use something like that for the heat maps where the great majority of the level is just blacked out, but from how I understand it there&#039;s no way to get the smaller memory size without trading it for a more complex look-up process. And you guys have told me that if I&#039;m in a situation where I have to choose between burdening the processor or the memory, I should go with the memory - so in that case it seems unnecessary to go out of my way to go against that advice.<br /><br /><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1061153#msg1061153">Quote from: absenter on September 13, 2014, 05:06:27 PM</a></div><div class="quote">I had a chance to play this game briefly at BostonFIG. It looks as incredible in person as the GIFs we&#039;ve been seeing. I must admit, I felt like I was terrible at playing it. I&#039;m excited to spend more time playing it when it comes out and getting a chance to learn to play it better! Very cool!<br /></div>Thanks for dropping by! Sorry I couldn&#039;t make it this time haha! One fairly common complaint with the game that I remember from PAX was that the controls were difficult... So you&#039;re probably not terrible, it&#039;s just that the controls aren&#039;t as streamlined as they should yet. Some people learnt the controls intuitively while some where struggling with them, so we probably need to find some kind of common ground between all users here. I for one have been playing with these exact controls for three years now, so I&#039;m way too used to them to be able to evaluate them properly - I think that when we get down to streamlining the user experience we&#039;ll have to bring in a few people who haven&#039;t played the game before and watch them play to see what problems they encounter. Anyhow, glad you liked it!<br /><br />This curve:<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/FR8ft.png" alt="" border="0" /><br /><br />is there a way to get a curve like this that fits <i>snugly </i>in a 1*1 square? I want 0&lt;X&lt;1 and 0&lt;Y&lt;1, and I want f(0) = 0 and f(1) = 1, but no X other than 0 should produce an Y of zero, and the same with 1. In english, the graph should hit the corners of the square perfectly. The one pictured actually doesn&#039;t hit the corners, if you change the steepness of it the graph will break out of the square elsewhere.<br /><br />Edit: Yay! <a href="https://dinodini.wordpress.com/2010/04/05/normalized-tunable-sigmoid-functions/" target="_blank">http://dinodini.wordpress.com/2010/04/05/normalized-tunable-sigmoid-functions/</a><br />It actually really <i>isn&#039;t</i> a sigmoid I think, as it doesn&#039;t have e^-x, but it fulfills the same purpose.</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#726">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="727"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1061525#msg1061525" target="_blank">JLJac on September 15, 2014, 02:55:30 AM:</a></b></td></table><br><b>Update 307</b><br />I spent the day trying to accomplish serialization of a class, as that was going to be a time saver I believed&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/cheesy.gif" alt="Cheesy" border="0" /> Serialization is basically that an object is converted to text (which can be stored in a text file, for example) and then converted back to an object again. My idea here was that I was going to save the AI maps like that. After having broken my game pretty badly it became more about trying to patch it back together again, something which was made harder by not being able to make visual studio break at exceptions, and... Yeah you get it! <br /><br />The end result was that I actually managed to make the serializer spit out some text, but way less than what could possibly contain the data I was trying to store (just the names of the classes I was serializing, basically. And some.... web url!? Idk.) To serialize an object I also have to adapt in a lot of wonky ways, like having an empty constructor etc. Also, all objects that are stored in the serializable object also have to be serializable... Basically, at the end of the day, I think it&#039;s going to be more efficient for me to just make my own method for converting my data to text and back again. Also, that way I will positively know that it&#039;s not storing something I didn&#039;t ask it to, such as strange web URLs and the like.<br /><br />The only problem I can see is that I need to store some floats. Integers will become 1, 2, 3 or 4 ascii characters, which is kind of wasteful with space but still within the realm of the reasonable. For floats however, if I want to save them with somewhat good granularity, I have to use like 6 characters for each, which seems horribly wasteful compared to the fact that a float is actually no bigger than an int in raw data.<br /><br />Does anyone know of any cool ways of converting ints and floats to ascii text that isn&#039;t horribly wasteful? Maybe you could make a huge BitArray, feed it all the ints or floats or whatever, then cut it up in pieces of however many bits make up an ascii character and just put that character in the text file? That would surely be using the space to 100%, right?<br /><br />A pretty frustrating day. It never cheers me up when what I&#039;m fighting with isn&#039;t an actual logical problem, but the functionality created by the microsoft people - all due respect though, everything they&#039;ve made that&#039;s streamlined and easy to use I obviously never even notice. The day wasn&#039;t all bad though. I did get some pretty nice restructuring done when it comes to &quot;preprocessing&quot; levels, ie finding out AI information about them and saving that to the text files. Also I solved the curve problem of this morning, and made a curve visualization tool that I&#039;m going to have a lot of use for in the future:<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/vz8jP.gif" alt="" border="0" /><br /><br />Over and out!</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#727">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="728"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1061557#msg1061557" target="_blank">JLJac on September 15, 2014, 04:31:17 AM:</a></b></td></table><br>Hm, I&#039;ve managed to translate float arrays to characters bit by bit... It doesn&#039;t become ascii though, but unicode. <br /><br />Look at this insanity:<br /><div class="quoteheader">Quote</div><div class="quote">&#39253;&#19615;&#13109;&#19336;&#32183;&#19627;&#6148;&#19591;&#55061;&#19469;&#3427;&#19575;&#18108;&#19608;&#10707;&#19397;&#34820;&#19212;&#3278;&#18999;&#51967;&#19590;&#49663;&#18777;&#41730;&#19627;&#39464;&#19532;&#58786;&#19523;&#10639;&#19340;&#33813;&#19520;&#46517;&#19577;&#43931;&#19638;&#52009;&#19086;&#60937;&#19378;&#64069;&#19613;&#46424;&#19488;&#27472;&#19532;&#60468;&#19410;&#65031;&#19642;&#59085;&#19581;&#54108;&#19530;&#58641;&#19623;&#12281;&#19226;&#36520;&#19083;&#65471;&#18860;&#47876;&#19253;&#17771;&#19622;&#65533;&#65533;&#19491;&#44455;&#19469;&#43915;&#19437;&#35834;&#18974;&#24974;&#19537;&#8335;&#19564;&#17480;&#19569;&#29850;&#19550;&#63840;&#19258;&#27428;&#19455;&#12880;&#19581;&#25792;&#19601;&#16263;&#19611;&#7657;&#19629;&#35806;&#19336;&#46864;&#19206;&#49287;&#19533;&#51299;&#18950;&#23476;&#18831;&#54939;&#19513;&#13381;&#19545;&#27109;&#19561;&#31567;&#19356;&#43042;&#18825;&#53530;&#19627;&#25922;&#19493;&#65533;&#65533;&#19524;&#55209;&#18858;&#41928;&#19630;&#1914;&#19616;&#9392;&#19552;&#16595;&#19598;&#44224;&#19480;&#50742;&#19570;&#30518;&#19152;&#41769;&#19518;&#25766;&#19615;&#48942;&#19023;&#63839;&#18986;&#20120;&#19352;&#47767;&#19558;&#5098;&#19615;&#32910;&#19642;&#44233;&#19638;&#52788;&#19504;&#48075;&#19544;&#23363;&#19605;&#30832;&#19641;&#65533;&#65533;&#19595;&#32185;&#19573;&#58583;&#19276;&#28875;&#19486;&#51990;&#19605;&#13369;&#19576;&#62431;&#19513;&#2743;&#19641;&#20515;&#19634;&#365;&#19355;&#31042;&#19602;&#24355;&#19484;&#15754;&#19545;&#5668;&#19202;&#32141;&#19546;&#12097;&#19489;&#20277;&#19627;&#11216;&#19595;&#14957;&#19388;&#6319;&#19644;&#16428;&#19561;&#61615;&#19590;&#31457;&#19343;&#64893;&#19505;&#33562;&#19445;&#35855;&#19516;&#26639;&#19610;&#3942;&#19576;&#7831;&#19572;&#52993;&#19615;&#8845;&#19550;&#20468;&#19458;&#51753;&#19593;&#9934;&#19587;&#31173;&#19644;&#60063;&#19609;&#49801;&#19569;&#44345;&#19075;&#62426;&#19406;&#5574;&#19399;&#60236;&#19401;&#31843;&#19335;&#57679;&#19572;&#20246;&#19552;&#60166;&#19543;&#5303;&#18148;&#53760;&#19192;&#39444;&#19343;&#43558;&#19491;&#45099;&#19520;&#20166;&#19596;&#48584;&#19541;&#41395;&#19272;&#51449;&#19574;&#4966;&#19611;&#22984;&#19518;&#8893;&#19584;&#42655;&#18595;&#22623;&#19604;&#44476;&#19560;&#31159;&#19293;&#24995;&#19541;&#34281;&#19612;&#55097;&#19341;&#29235;&#18906;&#59898;&#19501;&#33978;&#19599;&#65061;&#19431;&#24090;&#19557;&#52867;&#19599;&#12962;&#19642;&#21451;&#19521;&#50356;&#19449;&#43838;&#19640;&#58314;&#18927;&#6340;&#19232;&#34989;&#19643;&#34685;&#19433;&#12797;&#19383;&#32731;&#18951;&#13443;&#19448;&#53036;&#19601;&#6507;&#19613;&#59340;&#19421;&#33111;&#19092;&#17611;&#19595;&#33104;&#19349;&#41706;&#19506;&#35247;&#19149;&#1293;&#19459;&#51268;&#19474;&#54403;&#19604;&#51421;&#19196;&#17047;&#19586;&#48472;&#19597;&#57605;&#19643;&#45910;&#19516;&#48148;&#19136;&#10014;&#19612;&#37366;&#19503;&#45192;&#19358;&#59177;&#19407;&#54458;&#19553;&#16502;&#19640;&#59278;&#19548;&#64936;&#19617;&#28340;&#18908;&#23759;&#19364;&#26348;&#19422;&#16567;&#19580;&#41081;&#19645;&#46645;&#19492;&#20744;&#19423;&#50470;&#19587;&#20575;&#19453;&#59188;&#19475;&#19343;&#18843;&#47209;&#19638;&#13076;&#19626;&#10499;&#19563;&#49748;&#19618;&#23982;&#19597;&#52947;&#19532;&#58356;&#19251;&#47162;&#19576;&#7053;&#19469;&#63153;&#19124;&#57636;&#18907;&#40944;&#19588;&#58549;&#19392;&#54039;&#19618;&#47641;&#19623;&#20371;&#19488;&#60411;&#19513;&#15572;&#19470;&#27375;&#19624;&#16028;&#19630;&#18211;&#19449;&#63559;&#19639;&#23274;&#19445;&#47077;&#19618;&#59120;&#19249;&#37833;&#19503;&#30594;&#19410;&#4231;&#19521;&#42085;&#19626;&#13348;&#19354;&#32636;&#19618;&#54554;&#19535;&#15926;&#19626;&#43508;&#19512;&#39305;&#19372;&#5499;&#19638;&#44255;&#19615;&#41238;&#19404;&#65533;&#65533;&#19630;&#39175;&#19294;&#13102;&#19510;&#15097;&#19490;&#33952;&#19424;&#59469;&#19464;&#35680;&#19091;&#25572;&#19380;&#34858;&#19628;&#22759;&#19636;&#38085;&#19071;&#41030;&#19615;&#26198;&#19521;&#58583;&#19621;&#31399;&#19646;&#61485;&#18969;&#58157;&#19561;&#26506;&#19498;&#10105;&#19460;&#63387;&#19502;&#34312;&#19420;&#65533;&#65533;&#19631;&#31256;&#18956;&#35717;&#18952;&#49250;&#19517;&#30298;&#19151;&#20364;&#19439;&#628;&#19608;&#8934;&#19444;&#19984;&#19590;&#6860;&#19281;&#34770;&#19616;&#22322;&#19476;&#17124;&#19563;&#42373;&#19467;&#32465;&#19607;&#39064;&#19367;&#49346;&#19637;&#23844;&#19065;&#20938;&#19340;&#6459;&#19622;&#19176;&#19539;&#49847;&#19614;&#9412;&#19600;&#7264;&#19445;&#47525;&#18774;&#31595;&#19600;&#41119;&#19352;&#6415;&#19588;&#10217;&#19553;&#19948;&#19535;&#19460;&#19546;&#29148;&#19630;&#5391;&#19047;&#35189;&#19578;&#7396;&#19418;&#53555;&#19458;&#11236;&#19553;&#54396;&#19570;&quot;&#19526;&#53209;&#19528;&#19152;&#19589;&#63100;&#19599;&#3242;&#19230;&#26315;&#19610;&#36552;&#19625;&#2510;&#19570;&#60396;&#19445;&#59875;&#19491;&#10502;&#19635;&#64182;&#19558;&#25062;&#19002;&#26149;&#19425;&#43929;&#19382;&#44831;&#19477;&#44397;&#19310;&#44231;&#19634;&#25635;&#19542;&#65533;&#65533;&#19502;&#50955;&#19573;&#12007;&#19615;&#5233;&#19400;&#34025;&#19396;&#60791;&#19524;&#20716;&#19147;&#1794;&#19563;&#20478;&#19461;&#37829;&#19333;&#24912;&#19466;&#57559;&#19573;&#29247;&#19600;&#22941;&#19550;&#30468;&#19465;&#52653;&#19632;&#50588;&#19474;&#1008;&#19593;&#58954;&#19265;&#25230;&#19644;&#65533;&#65533;&#19636;&#65533;&#65533;&#19592;&#37047;&#19216;&#34644;&#19328;&#61242;&#19376;&#59998;&#19641;&#36285;&#19266;&#5171;&#19457;&#14696;&#19585;&#62641;&#19345;&#4296;&#19198;&#10174;&#19499;&#38998;&#19495;&#14884;&#19476;&#45266;&#19141;&#59454;&#19548;&#16050;&#18933;&#39715;&#19644;&#47412;&#19490;&#58119;&#19249;&#36770;&#19533;&#42437;&#19505;&#18371;&#19082;&#31396;&#19603;&#61898;&#19613;&#14854;&#19610;&#17611;&#19592;&#54901;&#19299;&#52153;&#19504;&#43393;&#19143;&#29179;&#19571;&#50077;&#19369;&#65208;&#19640;&#57496;&#19633;&#65533;&#65533;&#19643;&#19808;&#19543;&#1853;&#19435;&#51092;&#19478;&#45046;&#19413;&#62321;&#19465;&#3638;&#19208;&#2000;&#19528;&#49427;&#19335;&#43101;&#19313;&#26978;&#19614;&#54779;&#19608;&#7809;&#19620;&#13588;&#19205;&#14850;&#18680;&#7494;&#19464;&#26481;&#19640;&#33250;&#19525;&#43897;&#19614;&#6500;&#19379;&#24417;&#19562;&#65533;&#65533;&#19263;&#30752;&#19564;&#47567;&#19541;&#3719;&#19628;&#12496;&#19515;&#14631;&#19514;&#10275;&#19633;&#2491;&#19638;&#5916;&#19224;&#38187;&#19616;&#40293;&#19523;&#4947;&#19307;&#40107;&#19615;&#11460;&#19637;&#28708;&#19572;&#26570;&#19044;&#43175;&#19413;&#37419;&#19401;&#65533;&#65533;&#19409;&#20672;&#19509;&#31823;&#19220;&#65533;&#65533;&#19489;&#20708;&#19530;&#42838;&#18946;&#36102;&#19482;&#4588;&#19595;&#33740;&#18984;&#21984;&#19398;&#48389;&#19321;&#21898;&#19367;&#40333;&#19573;&#32420;&#19329;&#20378;&#19499;&#27212;&#19396;&#13689;&#19549;&#6351;&#19302;&#55285;&#19487;&#22627;&#19271;&#35842;&#19478;&#19438;&#657;&#19381;&#26232;&#19606;&#65533;&#65533;&#19568;&#65533;&#65533;&#19588;&#43952;&#19499;&#21197;&#19595;&#58073;&#19583;&#44083;&#18923;&#36463;&#19507;&#8452;&#19357;&#43575;&#19403;&#17791;&#19204;&#38501;&#18859;&#24930;&#18917;&#2954;&#19553;&#10647;&#19296;&#17617;&#19646;&#57571;&#19444;&#65509;&#19616;&#65063;&#19592;&#46708;&#19627;&#27476;&#19062;&#64255;&#19643;&#36284;&#19603;&#49622;&#19399;&#16655;&#19609;&#25959;&#19441;&#35653;&#19493;&#36065;&#19385;&#26498;&#19077;&#64893;&#19364;&#61761;&#19453;&#50336;&#19162;&#25748;&#19332;&#65533;&#65533;&#19380;&#59984;&#19621;&#59829;&#19457;&#48757;&#19152;&#52618;&#19197;&#37044;&#19074;&#15271;&#19489;&#23362;&#19174;&#65533;&#65533;&#19403;&#41497;&#19515;&#19415;&#19441;&#18995;&#19533;&#51143;&#19038;&#37616;&#19593;&#62814;&#19494;&#36703;&#19483;&#53719;&#19626;&#38055;&#19352;&#17968;&#19267;&#36683;&#19336;&#65005;&#19519;&#4229;&#19584;&#25425;&#19591;&#17679;&#18981;&#33462;&#19383;&#7352;&#19447;&#15696;&#19463;&#50654;&#19590;&#18424;&#19442;&#12471;&#19597;&#6594;&#19423;&#27299;&#19584;&#48000;&#19523;&#25648;&#19549;&#8703;&#19531;&#32270;&#19357;&#22977;&#19640;&#43797;&#19499;&#24275;&#19569;&#42217;&#19581;&#53846;&#19464;&#23522;&#19459;&#12775;&#19588;&#33388;&#19549;&#17264;&#19533;&#51562;&#19633;&#33570;&#19634;&#13610;&#19520;&#45503;&#19201;&#20677;&#19621;&#12340;&#19642;&#37296;&#19270;&#52870;&#19620;&#26627;&#19487;&#63741;&#19635;&#64337;&#19486;&#44506;&#19119;&#28425;&#19443;&#496;&#19597;&#23456;&#19621;&#752;&#19596;&#50993;&#19160;&#6575;&#19288;&#16410;&#19497;&#37797;&#19304;W&#19386;&#12556;&#19457;&#24274;&#19477;&#4480;&#19535;&#20230;&#19575;&#10368;&#19388;&#23715;&#19561;&#59805;&#19232;&#37693;&#19559;&#9847;&#19571;&#29221;&#19600;&#7075;&#19532;&#51600;&#19484;&#35461;&#19405;&#65361;&#19577;&#25148;&#19620;&#58356;&#18950;&#18783;&#19504;&#51391;&#19589;&#4681;&#19606;&#18897;&#19623;&#2177;&#19521;&#24964;&#19441;&#42889;&#19557;&#14229;&#19005;&#43864;&#19624;&#24012;&#19626;&#45173;&#19240;&#40996;&#19462;&#39226;&#19532;&#65533;&#65533;&#19552;&#36070;&#18918;&#14196;&#19505;&#5674;&#19600;&#2834;&#19088;&#13039;&#19608;&#23723;&#19604;&#18842;&#19626;&#2532;&#19606;&#36798;&#19622;&#25539;&#19592;&#32982;&#19485;&#32536;&#19054;&#30842;&#19467;&#41326;&#19529;&#19389;&#19612;&#19422;&#19602;&#51240;&#18856;&#42645;&#19479;&#65533;&#65533;&#18680;&#32438;&#19329;&#46288;&#19332;&#47398;&#19557;&#11287;&#19591;&#50437;&#19375;&#46434;&#19517;&#4960;&#19582;&#26090;&#19398;&#547;&#19615;&#28191;&#19616;&#4046;&#19601;&#25050;&#19618;&#1873;&#19441;&#26336;&#18977;&#3297;&#19457;&#35365;&#19072;&#22080;&#19098;&#32635;&#19622;&#39070;&#19299;&#43048;&#19624;&#9200;&#19554;&#45816;&#18533;&#52151;&#19477;&#52796;&#19624;&#31880;&#19589;&#51894;&#19520;&#23310;&#19317;&#40192;&#19254;&#41754;&#19625;&#51761;&#19228;&#38682;&#19590;&#1141;&#19558;&#32762;&#19608;&#63337;&#19616;&#23246;&#19536;&#61916;&#19487;&#23218;&#19372;&#18802;&#19537;&#59045;&#19634;&#40395;&#19620;&#65533;&#65533;&#19603;&#33014;&#19602;&#49153;&#19395;&#23849;&#19227;&#33513;&#19421;&#37901;&#19607;&#34018;&#19218;&#25641;&#19591;&#19196;&#19528;&#22178;&#19508;&#49548;&#18975;&#61251;&#19630;&#26687;&#19621;&#9619;&#19325;&#38484;&#19319;&#33808;&#19645;&#12378;&#19061;&#2856;&#19603;&#43526;&#18876;&#14144;&#19494;&#38106;&#19618;&#3307;&#19474;&#65533;&#65533;&#19635;&#8408;&#19633;&#52101;&#19642;&#25380;&#19557;&#37013;&#19609;&#47844;&#19594;&#25930;&#19432;&#51556;&#19629;&#7945;&#19499;&#21678;&#19375;&#65357;&#19606;&#47133;&#19614;&#18947;&#19538;&#4574;&#19568;&#47816;&#19475;&#46629;&#19617;&#60333;&#19569;&#15031;&#18788;&#50507;&#19629;&#2036;&#19518;&#21317;&#19614;&#53623;&#19631;&#3620;&#19133;&#41864;&#19377;&#51897;&#18744;&#575;&#19353;&#18230;&#19233;&#3487;&#19611;&#14748;&#19406;&#52775;&#19390;&#19490;&#19230;&#13296;&#19445;&#24578;&#19507;&#39013;&#19456;&#28845;&#19529;&#41138;&#19469;&#403;&#19352;&#51307;&#19367;&#30122;&#19605;&#26814;&#19598;&#42127;&#19521;&#6197;&#19597;&#59545;&#19451;&#1950;&#19612;&#2311;&#19257;&#65533;&#65533;&#19119;&#43240;&#19562;&#38379;&#19629;&#55093;&#19634;&#52451;&#19508;&#7715;&#19618;&#36726;&#19447;&#22343;&#19609;&#42022;&#19636;&#33557;&#19550;&#21434;&#19567;&#45940;&#19335;&#43985;&#19490;&#1619;&#19497;&#18910;&#19471;&#24406;&#19096;&#58951;&#19217;&#48050;&#19602;&#5857;&#19627;&#6173;&#19609;&#25699;&#19631;&#48007;&#19500;&#33675;&#19394;&#4359;&#19568;&#42212;&#19339;&#51310;&#19354;&#29835;&#19334;&#54051;&#19615;&#53824;&#19640;&#23306;&#19588;&#64334;&#19641;&#29555;&#19624;&#36589;&#19625;&#18968;&#19423;&#15355;&#19596;&#12212;&#19204;&#7350;&#19633;&#22309;&#19367;&#32390;&#19639;&#13448;&#19560;&#54736;&#19527;&#5002;&#19552;&#49818;&#19642;&#13946;&#19474;&#1437;&#19382;&#28968;&#19348;&#65035;&#19597;&#51037;&#19471;&#62935;&#19517;&#64737;&#19502;&#39209;&#19501;&#61956;&#19439;&#24930;&#19173;&#9274;&#19631;&#7266;&#19540;&#9993;&#19570;&#8618;&#19608;&#34141;&#19239;&#16154;&#19390;&#25705;&#19642;&#40076;&#19601;&#61734;&#19578;&#23869;&#19640;&#31440;&#19600;&#49221;&#19584;&#44902;&#19158;&#16051;&#19516;&#42946;&#19608;&#38559;&#19536;&#22997;&#19605;&#30370;&#19355;&#16403;&#19503;&#39832;&#19164;&#9703;&#19197;&#65533;&#65533;&#19619;&#9036;&#19408;&#39782;&#19474;&#18317;&#19642;&#35455;&#19606;&#35368;&#19436;&#33547;&#19415;&#22903;&#19404;&#2808;&#19050;&#51362;&#18870;&#47229;&#19351;&#57891;&#19597;&#9447;&#19643;&#7070;&#19505;&#33302;&#19457;&#8037;&#19633;&#32245;&#19641;&#58426;&#19538;&#18673;&#19180;&#51336;&#18564;&#40170;&#19440;&#41197;&#19531;&#29386;&#19219;&#50483;&#19318;&#14662;&#19576;&#8377;&#19533;&#26023;&#19511;&#30991;&#19405;&#62710;&#19306;&#65533;&#65533;&#19489;&#44404;&#19547;&#34899;&#19558;&#23919;&#19459;&#36898;&#19580;&#28120;&#19622;&#32717;&#19628;&#8146;&#19465;&#902;&#19459;&#63731;&#19639;&#55238;&#19550;&#4883;&#19337;&#26929;&#19644;&#41443;&#19600;&#63142;&#19344;&#42387;&#19627;&#35272;&#19437;&#20936;&#19502;&#31951;&#19639;&#29500;&#19354;&#52061;&#19627;&#61177;&#19584;&#13106;&#19137;&#21145;&#19619;&#39775;&#19493;&#13170;&#19626;&#41003;&#19544;&#9420;&#19226;&#59575;&#19604;&#1586;&#19228;&#49612;&#19467;&#62182;&#19609;&#27397;&#19622;&#46501;&#19610;&#5815;&#19420;&#29383;&#19644;&#24701;&#18878;&#41389;&#19599;&#57593;&#19617;&#27582;&#19250;&#41186;&#19559;&#4815;&#19340;&#48197;&#19604;&#35834;&#19614;&#26851;&#19636;&#61739;&#18981;&#37498;&#19433;&#22097;&#19547;&#1379;&#19320;&#31660;&#19552;&#33494;&#19635;&#7427;&#19594;&#9765;&#19555;&#42374;&#19288;&#18606;&#19421;&#43330;&#19636;&#10622;&#19109;&#63673;&#19173;&#6366;&#19365;&#9228;&#19407;&#33231;&#19337;&#43161;&#19611;&#12877;&#19380;&#47283;&#19410;&#6449;&#19586;&#15051;&#19592;&#62726;&#19369;&#36527;&#19390;&#50033;&#18921;&#54663;&#19459;&#58884;&#19050;&#15917;&#19345;&#51146;&#19324;&#33686;&#19466;&#23843;&#19587;&#23083;&#19240;&#41481;&#19645;&#5938;&#19615;&#15055;&#19478;&#27733;&#19162;&#42671;&#19600;&#46181;&#19568;&#25485;&#19605;&#50285;&#19624;&#3402;</div><br />If nothing else it&#039;s a somewhat interesting display of what languages have a lot of signs hahaha! This is generated from random floats. The vast majority seems to be Chinese and Japanese, which makes sense. There&#039;s quite a bit of Korean in there as well, but as Korean is a phonetic alphabet (although you group the letters together in compounds of 2-4) it&#039;s a lot less. Soooooometimes you see a roman or Cyrillic character in there.<br /><br />Huh. Pretty cool. Just not sure if I can actually store my data like this. It <i>does </i>seem to be re-convertible, if I ask for random floats back from the string-to-float method they&#039;re aligned. But it doesn&#039;t feel very safe if this game is supposed to be compatible with many different platforms. Also I read somewhere that some computers arrange their bits in the opposite direction, in which case the data will be totally jumbled. <br /><br />I should probably just do the actual serialization haha&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/whome.gif" alt="Who, Me?" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#728">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="729"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1061980#msg1061980" target="_blank">JLJac on September 16, 2014, 02:39:45 AM:</a></b></td></table><br><b>Update 308</b><br />There was a thing called Convert.ToBase64String which makes bit arrays into strings that are (from how I understand it) dense information-wise, and using that I finally managed to save my AI maps to the level files and load them again. These strings keep to ASCII characters and look a lot less menacing.<br /><br />I have also created infra structure for checking that all levels are up to date upon starting the game, and if not doing the AI map calculation on them and saving the results to the level file. When the level is then loaded it&#039;ll unpack and use that info. This part took a bit of fiddling, as when the level is loaded <i>to </i>generate the AI map it shouldn&#039;t load the (non-existent or out-of-date) AI map, and when it&#039;s later loaded for real it should <i>wait </i>to apply the AI map, as it needs to generate some parameters from the level geometry before it can apply the AI data. <br /><br />So yesterday&#039;s problems are solved! Instead a few others, more harmless ones have popped up. The dijkstra maps don&#039;t look perfect and probably need some messing with, and the thing that maps the distance between every exit and every other exit isn&#039;t plugged in and tried out yet. But the basics of pre-generated AI data is in! Yay!<br /><br />In less happy news James told me that Gimym JIMBERT is apparently taking a pause from tigsource! D: This means that Project Rain World will have to do without its main developer for a while, I will however do my best to step up and fill the position myself. Thank you a million times for all the useful help, I wouldn&#039;t be half as far without it! Come back soon!&nbsp; <br /><img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-l.gif" alt="Hand Thumbs Up Left" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/crazy.gif" alt="Crazy" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-r.gif" alt="Hand Thumbs Up Right" border="0" />&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/hand-shake-l.gif" alt="Hand Shake Left" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/tearsofjoy.gif" alt="Tears of Joy" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/hand-shake-r.gif" alt="Hand Shake Right" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#729">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="730"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1062022#msg1062022" target="_blank">jamesprimate on September 16, 2014, 06:36:15 AM:</a></b></td></table><br>deep sighs of relief were heard all across the globe!</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#730">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="731"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1062284#msg1062284" target="_blank">JLJac on September 16, 2014, 10:39:44 PM:</a></b></td></table><br>*phew* <img src="/Rain-World-Devlog/Images/Smileys/whome.gif" alt="Who, Me?" border="0" /><br /><br /><b>Update 309</b><br />Finally I think that everything having to do with AI data being saved to level files is DONE! For each creature (or rather for each &quot;pathing template&quot;, some creatures share the same pathing data as their movement is similar) there are now several AI heatmaps that can easily be accessed. One of those is the dead end map, and then there is a dijkstra map for each room exit. <br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/DUa0O.gif" alt="" border="0" /><br /><br />Here&#039;s a visualization where I can look at the different AI maps for all the different creatures by moving the mouse around. The ones with little blinking dots are the dead end maps, and the blinking dots are the hub spots or fleeing targets. Saving those to the file was kind of a hassle as well, until I figured out I could just shift the float upwards with 2. (Shifting it with 1 would be risky as the range is 0..1 and then it wouldn&#039;t know the difference between an actual 1 and a 0 that had been shifted.)<br /><br />This means that theoretically creatures could move around between exits with no path finding at all, just by following the dijsktra maps. In practice there are other things playing a role as well, such as the Obstacle Tracker, so most of the more intelligent creatures will still need to do actual path finding. For small, stupid, swarming creatures it could definitely be used though, enabling what looks like intelligent behavior with pretty much 0 strain on the processor.<br /><br />What most creatures will be able to use the maps for, however, is having a better general understanding about where they (and stuff they interact with) are in space. Which exit am I closest to? Which exit am I closer to than any other creature? Considering a group of creatures, towards which exit do they gravitate?<br /><br />I have this one idea though, let me share it with you and tell me what you think. The idea is that the dijkstra maps could be used as beacons for triangulation of distances between <i>arbitrary </i>points on the level. What I&#039;m talking about here is not distance as in straight distance, which is easy, but actual pathing distance with the terrain counted in. If you are close to another place in coordinates but it takes a huge detour to get there, that detour distance is pretty much the only thing that&#039;s relevant, right? I&#039;m thinking about this especially in terms of being afraid of other creatures, when fleeing it is very relevant information how close the threat actually is in terms of time to get to you, rather than mathematical shortest distance.<br /><br />I think the triangulation technique could create pretty decent estimations for these non-direct distances. To get the exact distance you&#039;d need pathing, but this technique is probably at least 10 000 times quicker in most cases, and will hopefully produce acceptable results.<br /><br />Ok, so take a look at this. Here&#039;s a dijkstra map for each exit, and I&#039;m trying to triangulate the distance between A and B. The data I have access to is the distance between those points and each exit.<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/uxKC.png" alt="" border="0" /><br /><br />So what I&#039;d do here is basically imagine each map as a dimension. For the first dimension, then, A is at 25 and B is at 12. That makes our delta in that dimension 13.<br /><br />ABS(25 - 12) = 13<br />ABS(18 - 60) = 42<br />ABS(40 - 6) = 34<br /><br />(No I didn&#039;t count tiles, the numbers are just invented)<br /><br />These distances in &quot;triangulation space&quot; can tell us some stuff. If we only have one dimension, we can&#039;t know very much, because there are many tiles on the map that are exactly 12 tiles away from a specific exit, and they are not necessarily close to <i>each other</i>. E.g 12 tiles to the left of the exit and 12 tiles to the right of the exit. If we have more dimensions to play with though, I think the triangulation would quickly become more reliable. At three dijkstra maps my estimation is that it would be extremely uncommon for two tiles to have the same combination of distances to all exits, making the coordinates in &quot;triangulation space&quot; pretty reliable in their relationships to other coordinates. Correct me if I&#039;m wrong here!<br /><br />The system could potentially give a &quot;false close&quot;, but never a &quot;false far&quot;. An example of a &quot;false close&quot; would be if you have a room with an obstacle in the middle and an exit at the north and the south of the obstacle. A point to the west of the obstacle could have the same distance to both exits as a point to the east of the obstacle, making them appear identical or close in &quot;triangulation space&quot;. An asymmetric placement of the exits, or a third exit, would help with that though. <br /><br />A &quot;false far&quot; can never happen, because if the points are separated in <i>any </i>of the &quot;triangulation space&quot; dimensions, they are <i>at least</i> as separated in actual travel tiles as well. Look at A and B in the third picture above - the absolutely closest they could be while having the distances 40 and 6 would be if B was 6 tiles up on the same path as A, and then they&#039;d still be 34 tiles separated.<br /><br />Another way to say this is that if the deltas in all &quot;triangulation dimensions&quot; is 0, A and B might or might not be on the same tile, but if <i>any </i>dimension has a delta larger than zero, A and B are sure to not be on the same tile.<br /><br />The fact that the system might give a &quot;false close&quot; but never a &quot;false far&quot; probably means that of the three deltas calculated in the example above, you should pick the biggest one, and conclude that the actual distance can be no larger than that. <br /><br />I think this makes it fitting for fleeing behavior. These distances could be used to evaluate how nervous a creature should be about another creature, and whether it&#039;s time to calm down and stop the fleeing behavior. &quot;False close&quot; isn&#039;t too bad in this scenario, because better safe than sorry, right? <br /><br />Also it will be cool to check out how this can be used in swarming behaviors. Maybe you could even create some strange kind of dynamic path finding using it, if you move towards whichever neighboring tile is the closest to your goal in triangulation space rather than in actual space. <br /><br />Oh, when I read through my post before hitting the button I had a small epiphany! One way to further eliminate &quot;false close&quot; could be to add the mathematical straight distance between A and B and treat it exactly like one of the triangulation dimensions! It has the exact same properties - ie that A and B can&#039;t be <i>closer </i>than that, so it would work really well as a last reality check, eliminating for example the &quot;obstacle in the middle and symmetrical exits on each side&quot; problem. Shortcuts messes this up a little bit as they make it possible for tiles to be &quot;closer than they actually are&quot;, so maybe it shouldn&#039;t be relied upon too much. But shortcut travel still takes some time, so it could be counted in to some degree...</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#731">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="732"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1062299#msg1062299" target="_blank">JLJac on September 16, 2014, 11:33:40 PM:</a></b></td></table><br>Dijkstra map triangulation looking pretty good!<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/X54nG.gif" alt="" border="0" /><br /><br />The color of each tile is how far that tile is estimated to be from the mouse pointer. It uses the largest distance it can find. <br /><br />I have a bit of a heuristic approach here, where the it counts 1/3 of the straight line distance as one of the dimensions, meaning that straight line distance is accounted for, but not taken quite as seriously as the triangulation dimensions. This looks like a good balance to me, as if I didn&#039;t account for straight line distance at all it would display some pretty obvious weird artifacts and errors, but if I counted it in fully it would not leak through shortcuts at all.<br /><br />Contrary to what I expected the algorithm does give some &quot;false far&quot; outcomes, in cases when all the exits are close to each other. This can be helped by giving the straight line distance more weight. I&#039;m thinking though, maybe I shouldn&#039;t actually just pick the largest value - instead I could try to calculate the multidimensional diagonal in triangulation space?&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/evil.gif" alt="Evil" border="0" /><br /><br />It is pretty cool though! It gives an estimation of a dijkstra map between <i>any </i>two points that&#039;s decently accurate, and at 0 memory cost and 0 processing cost. The way to do this &quot;properly&quot; would be to move around a dijkstra map target every time it changes tile, do a complete flood fill, and save a huge grid of those values, just to throw it away on the next movement. Slow, weighty, and it couldn&#039;t really be done for more than a few moving entities. This system can estimate distances between all and any points on the fly! I do these calculations for every tile times every frame! With this system I could easily have 100 creatures asking for the distance to all 99 other creatures each frame, and it wouldn&#039;t even be a problem.<br /><br />Gonna try my hands at those multi-dimensional diagonals now ...<br /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#732">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="733"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1062306#msg1062306" target="_blank">JLJac on September 16, 2014, 11:59:58 PM:</a></b></td></table><br>Yeah! These are actually far from perfect - if you look at the gif you might notice that there&#039;s some snapping going on at places. That&#039;s where one of the dijkstra maps approach the area from two different directions. Those tiles are considered far apart despite actually being close. The less dijkstra maps it has to work with and the closer they are the more stuff like that. But given the extreme benefits in speed and memory I think that&#039;s worth it by far. For AI&#039;s that are supposed to be a bit smarter you could maybe have a real dijkstra map being updated close to themselves or the threat they&#039;re avoiding, and then resort to the triangulation for the rest of the level. <br /><br />Multidimensional diagonals worked out fine, the estimation looks a bit smoother. They&#039;re probably a bit slower as they have some exponents and a square root (it&#039;s actually just Pythagoras&#039;s theorem in n dimension) but that&#039;s still so vastly faster than creating actual dijkstra maps that it&#039;s not really anything to think about.<br /><br />It will be interesting to see how the AI will be able to use this!</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#733">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="734"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1062515#msg1062515" target="_blank">JLJac on September 17, 2014, 03:14:47 PM:</a></b></td></table><br>That would be generating and following a dijkstra map - every tile knows its distance to a fixed origin point. The triangulation is about comparing multiple overlapping dijkstra maps to estimate the distance between <i>any </i>two arbitrary coordinates. This means that I can get an approximation of a dijkstra map for any point with just a few lines of code executed and no memory usage, contrary to executing the tens of thousands of lines of code necessary to generate an actual dijkstra map and save it to memory.</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#734">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="735"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1062523#msg1062523" target="_blank">JLJac on September 17, 2014, 03:38:08 PM:</a></b></td></table><br>Yep! The more baked maps, and the more apart their origins, the more accurate the triangulation becomes.<br /><br />What the system doesn&#039;t account for however is one-way connections, as it&#039;s just comparing distances it doesn&#039;t know the difference between positive or negative distance, or what kind of connections the distances go through.</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#735">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="736"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1062636#msg1062636" target="_blank">JLJac on September 18, 2014, 01:18:26 AM:</a></b></td></table><br><b>Update 310</b><br />So I got some flight behavior up and running. The core mechanic is an engine that can identify a &quot;threat level&quot; for any given tile, like so:<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/cGEXi.gif" alt="" border="0" /><br /><br />Sorry about the coloration in these ones, it&#039;s a bit unintuitive as I didn&#039;t invert the hues. Red is <i>less </i>threatening, and blue is very threatening. The map is generated by a combination of straight distance and dijkstra triangulations.<br /><br />The system supports many different threats which can be assigned separate severity. In this next gif there&#039;s one threat emitter assigned to the mouse pointer and another stationary - they tend to melt together if they get close.<br /><br />The dead end map is consulted as well - you might notice how some tiles are always considered a bit threatening. Basically dead end tiles get a &quot;bonus&quot; on their threatening level.<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/3Sxmi.gif" alt="" border="0" /><br /><br />The flight behavior consists of picking an (accessable) coordinate every frame, and comparing it to the current destination of the path finder. If the new point is less threatening than the last one, the new one is assigned. There&#039;s a 50% chance to evaluate one of the pre-baked &quot;hub spots&quot;, otherwise it&#039;ll pick a coordinate from anywhere in the room. I&#039;ll also have it consider exits here later, making the creature able to flee from the room rather than just within it.<br /><br />The path finder assigns a harsh cost to tiles that are considered threatening, meaning that the paths will take detours to avoid them. I have an exponential formula to this, making it almost impossible for it to path through a threat area.<br /><br />Here&#039;s a blue lizard feeling very afraid of the mouse pointer.<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/j9QRJ.gif" alt="" border="0" /><br /><br />The lizards are not good at crawling backwards, and avoid it for the most part, but if they have a nearby threat right in front of them they&#039;ll back up. This will activate a &quot;panic mode&quot;, lasting a second or so, where they won&#039;t path to any specific target, but just move to whichever nearby tile is considered the least threatening. <br /><br />The system is perhaps not perfect, but I think it&#039;s good enough for most purposes. The goal here isn&#039;t as much to create an actual super efficient fleeing behavior as it is to communicate <i>that </i>the creature is trying to escape. From a game fun perspective it is probably always more fun for a non-player entity to actually bite the grass rather than successfully getting away (Action happens! Something gets eaten! And it wasn&#039;t you!) so as long as the behavior doesn&#039;t look frustratingly stupid I&#039;m happy with it. Now to contemplate what to do next... Flies?</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#736">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="737"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1062977#msg1062977" target="_blank">JLJac on September 19, 2014, 12:11:51 AM:</a></b></td></table><br>Haha yeah - I think it&#039;ll be pretty cool when you&#039;ve been antagonized by those guys for a while to suddenly see them flee from either yourself when you&#039;ve managed to hurt a few of them with a spear, or some larger creature hunting them.<br /><br /><b>Update 311</b><br />Spent the day cleaning up the fleeing behavior - I had stupidly been using just 2D coordinates throughout the entire system, making it unable to differentiate between rooms and making creatures potentially confused by threats in other rooms. Now it&#039;s using world coordinates, that have the room index specified.<br /><br />Now the threat tracker can create a link to the creature tracker as well, which I didn&#039;t really have a framework for yesterday. This means that a creature can avoid another creature using its tracking data, and I can easily set up links like that when the AI is alerted that a new creature has been spotted. As the time since the threatening creature was seen increases, the threat will decrease accordingly, until it&#039;s forgotten altogether.<br /><br />Also enabled fleeing between rooms. If a fleeing creature realizes that there&#039;s an exit with no threats blocking it, it might just leave.<br /><br />Have a nice weekend! Here&#039;s a gif of Reverse Rain World!<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/OblongRashCirriped.gif" alt="" border="0" /></div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#737">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="738"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1064243#msg1064243" target="_blank">JLJac on September 22, 2014, 03:34:11 AM:</a></b></td></table><br><b>Update 312</b><br />Some pretty interesting parts have started moving into place today. First and foremost, a framework for relationships between species. A relationship is a one-way link between one Creature Template and another, consisting of a type enumerator and a float signifying intensity. Currently I have Ignore, Eat, Afraid as possible relationship types, but there are endless possibilities such as AggressiveRivalry, Annoyed, Symbiotic, KillForFun, Cautious, Territorial, and so on. These are the threads that will hold this food web together. <br /><br />As you might remember the Creature Templates have some inheritance between them - for example there exists a Lizard template that&#039;s never incarnated on a level, but which is an ancestor of all the lizard breeds. I&#039;ve set the relationship system up to flow down through the inheritance tree, and overlap empty (&quot;Ignore&quot;) relationships but never specifically declared relationships. I&#039;ll have you know that I did this with a <i>recursive </i>method! (On declaring a relationship, check all children if they have any relationship to the relationshipee, if not, call the method again but on the child! I only got stack overflow exceptions 5 times setting it up!)<br /><br />This means that I can first declare that all lizards should eat slugcats and ignore each other, by addressing the ancestor Lizard object. Then I can create exceptions, like making Green lizards hunt Blue lizards, making Pinks aggressive towards each other, or deciding that Greens should actually run away from slugcats rather than hunt them.<br /><br />The really cool part about today though is that I&#039;ve been able to start hooking the AI components to some behavior. Everything was pretty much in place already, so it was very easy to make the lizards actually react to other creatures. As I had planned, it seems like I can create lizard behavior with very little code in the actual lizard AI, as almost everything is outsourced to the different modules. <br /><br />So for example there is a Threat Tracker, right? And from today a Prey Tracker as well. The general AI already has a method that is &quot;a creature has been spotted&quot;. So what the lizard AI does is that each time it gets notified about a new creature it checks with the Creature Template Relationships: if the alien creature is prey, it notifies the Prey Tracker - if it&#039;s a threat, the Threat Tracker is notified.<br /><br />These modules are then pretty much autonomous, they run their own behaviors alongside the main AI, keeping track of threats and potential prey respectively. Every frame the main AI can <i>ask </i>them, however, for a status report. The Threat Tracker can be asked for a threat level 0-1, and the Prey Tracker can similarly be asked how it estimates the chances of catching its most attractive prey within the next few frames.<br /><br />Using these values, the main AI can do a utility based decision - what&#039;s more urgent? If the threat tracker tells me that I&#039;m actually in danger here, perhaps I should activate the Fleeing behavior? The idea here is that these values should be weighted when compared, for example a threat level of 0.3 might be more important than an estimation from the Prey Tracker at 0.7, as self-preservation should be prioritized. Later when more elements are in, the threat of rain could perhaps overshadow the threat of another creature, etc.<br /><br />So say that the utility check decides that the current threat level is the most urgent issue - in that case the fleeing behavior is activated. When the fleeing behavior runs, the main AI once again turns to the Threat Tracker, this time asking for specific details on where to run. The Threat Tracker then does its calculations and returns a flight path, while the Prey Tracker can be more passive this particular frame.<br /><br />Then there&#039;s of course talk between the modules, all of which is moderated by the main AI. For example the Path Finder will ask the main AI about each tile it handles, whether or not the main AI wants to add some path finding cost to that particular tile. The main AI will then ask other modules, such as the Obstacle Tracker or Threat Tracker, and for example return higher costs to tiles that are perceived as more threatening.<br /><br />It all seems to work! A hunter/prey relationship between Green and Blue lizards makes one pursue the other, but both still hunt the player on opportunity, for example. It&#039;s a lot of fun to be able to switch these relationships on an off at a whim. Right now there&#039;s no real interactions in yet, so they can&#039;t bite each other or the like, but it&#039;s still fun to watch them react to each other.<br /><br />What&#039;s fun about the AI system is that it seems I have somewhat been able to separate the more technical stuff from the design stuff - out in the modules calculations are done, while in the main AI there are only a few lines of code, but those lines are creative content rather than technical solutions. Using the modules I can quickly and cleanly create behavior that conveys personality, such as cowardice or brute force, rather than solving a lot of technical problems. I&#039;m much looking forward to creating more creatures within this framework!<br /><br />All of this is very hardcoded and crude as is, but I soon hope to be able to show you some more sophisticated stuff.</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#738">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br><br>
<a name="739"></a><div style="display:flex"><div style="flex-basis:10%"></div><div style="flex-basis:80%; max-width:80%"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" style="vertical-align:middle"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1064540#msg1064540" target="_blank">jamesprimate on September 22, 2014, 06:12:59 PM:</a></b></td></table><br><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1064243#msg1064243">Quote from: JLJac on September 22, 2014, 03:34:11 AM</a></div><div class="quote">KillForFun<br /></div><br />joar turning the brutality up to 12</div><div style="font-size:80%">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/037.html#739">[Message link]</a></div></div><div style="flex-basis:10%"></div></div>
<br><br><hr><br>
<span style="background-color:#151015ea"><a href="/Rain-World-Devlog/Pages/036.html">Previous page</a> / <a href="/Rain-World-Devlog/Pages/038.html">Next page</a></span></body>