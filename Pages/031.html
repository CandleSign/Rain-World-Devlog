<head><title>Rain World Devlog</title><link rel="icon" href="/Rain-World-Devlog/Images/Archived Images/ljrr7.jpg"><link rel="stylesheet" href="/Rain-World-Devlog/css/style.css"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Rain World Devlog Archive"></head>
<body class="body">
<div class="header"><span id="pagelist"></span>&emsp;&emsp;&mdash;&emsp;&emsp;<img src="/Rain-World-Devlog/Images/Title.png">&emsp;&emsp;&mdash;&emsp;&emsp;<a href="/Rain-World-Devlog/Home">Home</a></div><script src="/Rain-World-Devlog/js/pagelist.js"></script><script src="/Rain-World-Devlog/js/header.js"></script><br>
<a name="600"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1028536#msg1028536" target="_blank">JLJac on June 05, 2014, 12:30:08 PM:</a></b></td></table><br>Wish I could, but it&#039;s full screen stuff so it&#039;s not very convenient for gifs. I think the best description of what&#039;s going on is &quot;you can exit a room by walking out the edge of it, and then you&#039;ll enter the next room from the opposite edge&quot; - what&#039;s confusing is that the way this is achieved technically is that both the rooms are actually <i>one big room</i>, with two different <i>camera positions</i> between which the camera can switch. <br /><br />Gah, a full long day of coding really doesn&#039;t do wonders for your communication skills. Maybe James will drop by and explain what&#039;s going on using human words <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /></div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#600">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="601"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1028541#msg1028541" target="_blank">jamesprimate on June 05, 2014, 12:55:12 PM:</a></b></td></table><br>yeah basically! a large room or space can now be comprised of several screens which seamlessly transition. we want to preserve the rain world &quot;bunch of connected rooms&quot; feeling, but not be limited by it. <br /><br />previously, it was a bit hard to show much of world geography or scale, as you&#039;d just pop from one single-screen-room to another single-screen-room, NES zelda style. we wanted a better way to show distance and preserve a sense of the shape of the large objects (rooms, buildings, whatever) you are exploring, but without resorting to the platformer style scrolling screen, which was not an option for a number of reasons.<br /><br />so this works as a happy medium. it vastly expands whats possible for level design (and the mood we can convey with it), but also preserves the rain world vibe. we&#039;ll have to keep an eye out to making sure we don&#039;t start doing too many platformery things just because we can though, so call us out for that if you see it. we want it as a tool, not &quot;a genre&quot;, if that makes sense.</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#601">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="602"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1028555#msg1028555" target="_blank">jamesprimate on June 05, 2014, 01:59:10 PM:</a></b></td></table><br>whoa thats a really good question, and its something we&#039;re probably going to be exploring the next half a year or so. this devlog generally tends to be more about the technical side, letting the more artsy / conceptual aspects sort of speak for themselves, but answering this requires a bit of a journey into that bog. (which im more than happy to oblige, as this bog is my home these days!)<br /><br />from my perspective, rain world is sort of an elaboration on a few themes: ecosystems / scarcity / exploration / loneliness / choices / decay. the experience is interesting because joar has been able to stay very true to this kind of unique, brutal and impersonal world-view in what you&#039;ve seen so far. i think the underlying idea is that its more intended as a diorama or terrarium ecosystem than as &quot;a game&quot;, (yet is still hopefully playable and fun as a game!)<br /><br />so the challenge is in taking it from the snapshots of this central concept (as suggested by the alpha) and into a full game that is cohesive, with a sense of progression, fully realized world, etc., and not resorting to &quot;bad guy lizard stole your girl/boyfriend, go get them back&quot; sort of thing which wouldn&#039;t be true to the central concept.<br /><br />So to steer this around to answering your question, its almost as if we have to build the world first before designing an area. how much of that world is actually shown is debatable, but the intention is to have the narrative/experience be a result of the game world, and thus the game mechanics. so ideally its sort of like this: <br /><br />central concept -&gt; game mechanics implied by concept -&gt; world implied by concept/mechanics -&gt; areas and creatures implied by world / mechanics -&gt; situations and scenarios implied by creatures/areas/world/mechanics<br /><br />if that makes any sense. but obviously we&#039;ve been discussing, debating and internalizing these concepts for years as RW has developed, so its not like we consult a flow chart or anything. Anyway, I hope that wasn&#039;t too much of a diversion and answered some of your question!</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#602">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="603"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1028584#msg1028584" target="_blank">jamesprimate on June 05, 2014, 03:48:50 PM:</a></b></td></table><br><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1028565#msg1028565">Quote from: Christian on June 05, 2014, 02:28:44 PM</a></div><div class="quote">I almost hope the hunger meter and other game-y UI elements are scrapped so that organic atmosphere is preserved. <br /></div><br />oh i totally agree and those specifically have been discussed a few times. with this rebuild we have the opportunity to completely revisit the UI stuff without the lingo limitations, so heres hoping we can find cool solutions. <br /><br />one improvement that im really looking forward to is the planned elimination of the &quot;rain meter&quot;, which used to show up at the bottom of the screen as a countdown when rain was imminent. now the idea is that were going to have the rain gradually build up from an innocuous light sprinkling to dark skies, to obviously screen-shakingly deadly. that solution comes with its own host of problems too, but hey it sounds damn awesome.</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#603">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="604"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1028715#msg1028715" target="_blank">JLJac on June 06, 2014, 06:56:10 AM:</a></b></td></table><br>I&#039;ll check that video thing to see if I can upload something!<br /><br /><b>Update 251</b><br />The boring stuff isn&#039;t done, but it&#039;s functional enough to leave it be a while. I had a little talk with James about where to go from here, and it&#039;s probably AI - that&#039;s pretty much the main mechanic in Rain World, and the thing that would make this whole thing come alive again. <br /><br />So, now when boring week is over, we&#039;ll briefly stick our heads above the surface before diving back into boring <i>month<b>(s)</b></i>. Those lizard AIs were a horror the last time, and this time around I have less knowledge of the platform I&#039;m programming in (making debugging harder, and oh god is there going to be debugging) so we&#039;ll just have to hope for the best hah!<br /><br />Before that though, some throwables!<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/MbJux.gif" alt="" border="0" /><br /><br />And some sprites apparently, I forgot to disable them and stopped seeing them after a while...<br /><br />The basic physics are already in by default which is why inheritance is the best thing ever, so I&#039;ve just messed around with the actual interactions.<br /><br />I have some fun things in mind. Rather than the super simple system we had in the old build, this one has a more generalized system for grabbing stuff that will allow for more interactions. Each creature has a number of grasps - the slugcat has 2 hands, the lizard has a mouth, etc. Grasps can be used to grab objects, and they have their own little mini class which keeps track of the grabber and the grabbee, which grasp is used, which body part is grabbed, etc. Also every object keeps track of what creatures are currently grabbing it. I think a lot of fun interactions can come out of this - such as a tug of war over an item between two creatures, maybe grabbing on to other creatures and &quot;wrestle&quot; them, etc. We&#039;ll see where it goes.</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#604">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="605"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1028772#msg1028772" target="_blank">jamesprimate on June 06, 2014, 10:19:32 AM:</a></b></td></table><br>so here is a video of the multi-camera thing ROUGHLY implemented, just slapped on to current levels to experiment with: <br /><iframe width="640" height="385" src="https://www.youtube.com/embed/5mV4Rry2Q84?fs=1&start=" frameborder="0" allowfullscreen></iframe><br /><br /><br />there are two different ideas being tested in this, :06 is basically two connected rooms and the screen camera just swaps when you exit (with a little overlap) and :40 has the cameras set in more drastically different places, which might be worth considering for future level design.<br /><br />also at 1:00 there is a test level seeing how multi-room platforming might be (answer: hard.) shows off some of the new limb animations!<br /><br />(worth noting: this is probably not at all how it will be implemented, just early testing of the functionality.)</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#605">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="606"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029196#msg1029196" target="_blank">jamesprimate on June 08, 2014, 04:31:40 AM:</a></b></td></table><br>Joar will probably chime in with a more specific explanation when he gets back, but as I understand it this camera swap setup is a workaround of some limitations we&#039;ve run into with unity vs. director/lingo. basically, unity has a much more strict limitation of image size than director/lingo does, meaning that we cant build multiple-screen levels in the way that we want to (ie. as one big ass PNG). our options are that we either have to scrap the current level editor, most current level assets and with it a good chunk of the &quot;style&quot;, or we settle for a slightly awkward camera limitation.<br /><br />it&#039;s not ideal, but as rain world was pretty much built around the single-room/screen idea, it probably makes sense to keep that mostly intact anyway, with perhaps some multi-screen levels here and there as set pieces or to show scale, etc etc. so that&#039;s kind of what&#039;s being shown here. I think once it&#039;s being seen implemented on multi-screen levels that were made with this mechanic in mind it&#039;ll probably make a lot more sense in context.. but I guess we&#039;ll find out that pretty soon!</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#606">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="607"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029221#msg1029221" target="_blank">JLJac on June 08, 2014, 07:34:22 AM:</a></b></td></table><br>Hi guys! OK, so let me give some more context to all of this.<br /><br />Do you remember the parallax thing I wrestled with a few weeks back? That was my attempt to create the very same solution as you guys are suggesting now. In explanation - the camera should snap to certain positions (in order to give the environments some attention and gravity, rather than just having them be something that&#039;s rushing by sonic the hedgehog-style) but it would move smoothly between those positions, and be able to leave them for free movement if necessary.<br /><br />Enter the Unity limitations. <br /><br />A rain world level is, despite it not being very evident, 30 layers of bitmap graphics, each displayed on top of each other in order to create a slight 3D effect. You might not notice this much, but it&#039;s a huge part of what makes the levels &quot;look good&quot;, and you&#039;d certainly notice if it was swapped out for just a regular flat 2D image.<br /><br />My first idea was to store all 30 layers in one single .png, all on top of each other, and have a shader do a raycast through them all. But Unity limits texture height to 4000 (or 8000 if you want to stretch it) pixels, meaning the largest level size would be 4000/30 ~ 130px, and that won&#039;t do. Also the file size would be humongous. Maybe it&#039;s as well I didn&#039;t manage to do it, a million pixels times 30 cycles might very well have blown my computer up, leaving most of Stockholm a smoking crater.<br /><br />My workaround, the one with which I achieved that parallax .gif, was to save all the layers in its own .png. This means every level would be 30 files big, a logistic nightmare. Also, the file size, and the fact that all of that data would have to hang out in RAM, made it feel unrealistic as a solution. On top of all this, I was very unsure about how to make the shadows work in such a solution - I would probably have to have each layer draw to some kind of render texture, and that would be 30 full screen copypixels every frame... You see my point here.<br /><br />Then I started contemplating different bump mapping-like shader ideas, and the notion to write my own file format for compressed 3D textures... The complexity of those solutions were kind of getting out of hand.<br /><br />So this is when I decided that screw it, I&#039;m going to have the dynamic shadows, but I&#039;ll have to pre-bake the levels. The reason why pre-baked levels means fixed camera is that the perspective effect is baked into the 2D image rather than rendered on the fly as in the parallax solution - if the camera moves the lines won&#039;t converge at the horizon as supposed to, and it will become very evident that it&#039;s a 2D image rather than anything else, ruining the illusion of depth. <br /><br />About now I started to remember my thinking when working under the pretty bad technical limitations of Director. Back then I was also thinking about a moving camera, but I decided against it. It would eat away at the framerate way too much, forcing me to compromise other parts of the game. I decided that a lot of games had moving cameras, but few had procedural animation and complex AI, so I decided to put my processor cycles and work hours there instead. <br /><br />Why would I make a different prioritization now, I thought? If I have this one solution that&#039;s much harsher on the processor, will take me much longer to implement, will make the size of the game much larger, will force me to compromise other parts of the game etc, what would it take for it to be worth it? In the end I think that the features that are actually unique to Rain World, mostly animation and AI, are the ones that deserve all of those resources.<br /><br />I know of several platformers that only have fixed screens with hard cuts between them that work perfectly well in my opinion, or have even found a way to stylistically benefit from it. An Untitled Story is one of my old indie favorites that works like that. Maybe if we study those examples, we&#039;ll be able to make this solution feel as natural and work as well as they did? Obviously it will take some trial and error, and obviously most of the awkward experiments I threw together in this build won&#039;t cut it. But I think that if we put the work in to make it work, it will be preferable compared to the free-floating camera which would look soooo cool, but which in the end isn&#039;t really worth it...&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/huh.gif" alt="Huh?" border="0" /></div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#607">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="608"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029395#msg1029395" target="_blank">JLJac on June 08, 2014, 10:51:42 PM:</a></b></td></table><br><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029268#msg1029268">Quote from: metlslime on June 08, 2014, 11:44:58 AM</a></div><div class="quote">Having watched the video, I think your most jarring transitions are the ones where the two screens have some overlap.&nbsp; For example, 0:10 transition and especially the 0:43 transition. The most comfortable are the ones where the character goes to the full edge of the screen, and then teleports to the opposite edge of a completely new screen.&nbsp; For example at 0:30.&nbsp; This is the traditional &quot;flip screen&quot; behavior that many games have had and that gamers are fairly familiar with.<br /><br />Probably what makes the first type bad is that it is unexpected.&nbsp; With the second type, as I approach the edge of the screen as a player I know something has got to happen, since before long I will be off the screen entirely.&nbsp; The player can anticipate the event.&nbsp; And the player knows where to look to find their avatar on the new screen, since there is a consistent behavior.<br /><br />Watching the tower ascent starting at 1:00, it actually works pretty well.&nbsp; The rule of predictability is maintained, and the small overlap between the screens (usually it&#039;s a horizontal bar that is visible on both) seems to work well. (Though, the small camera movement right before each camera switch seems unnecessary and weird.)<br /><br />However, in my own game I started with flip screen and later added a sliding transition, similar to what one sees in zelda.&nbsp; I feel this is actually superior since the player is able to watch their character the whole time, and there is a short time period where the player input is disabled (during the transition) and this allows players to let go of the controls, or get ready to start moving, after they have already seen the new room briefly.<br /><br />Your choice on the last point though, as many good games have used flip screen and players can easily cope with it, as long as it is done in a consistent way.<br /></div><br />Very good points all of these, and they generally line up with my experience as I&#039;ve been trying these systems out. I think the best would be to have it switch when you reach the edge of the screen horizontally, because then you expect it to switch. The main problem here is that we&#039;re supposed to support both wide-screen and non-widescreen formats...&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/whome.gif" alt="Who, Me?" border="0" /><br /><br /><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029314#msg1029314">Quote from: Gimym JIMBERT on June 08, 2014, 03:27:30 PM</a></div><div class="quote">4000 (4096 in fact) isn&#039;t unity limitation, it&#039;s the physical limit of gpu&#039;s shaders, also might not work on all card who don&#039;t accept such large texture. You should look into things like virtual texture techniques to know how to handle arbitrary large texture (amplify use something like that).<br /><br />There is certainly way to do it since there is many unity 2d game that does the heavy large large levels. Maybe rendering everything in a single shader is not the best solution? Try to post about it in unity3D forums!<br /><br /><a href="https://forum.unity3d.com" target="_blank">http://forum.unity3d.com</a><br /><br />Set a thread in showcase too, maybe unity themselves will propose to help, it happens.<br /></div><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029353#msg1029353">Quote from: Lee on June 08, 2014, 06:16:30 PM</a></div><div class="quote">I was having a problem with an extremely large texture myself once. I was using a big sprite sheet (2080*1280) with 160px*160px pre-rendered 3d sprites, and I bound the whole thing to a single texture using OpenGL, but it wouldn&#039;t work on older computers. So yeah, it&#039;s a GPU thing. The solution was to cut it up into individual textures after loading. Perhaps you should do something similar? 512x512 chunks drawn in a grid?<br /></div><br />Yeah, I could just cut it up in smaller chunks. That wouldn&#039;t help with the enormous files size and RAM usage though. Plus the dynamic shadow issue, etc. The situation isn&#039;t really that I <i>can&#039;t</i> make it work (you&#039;ve seen the gif, I did make it work already&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/wink.gif" alt="Wink" border="0" />) as much as that I don&#039;t think it will be worth it. On the one side we have a cool transition, on the other we have a huge work load on the processor, on the gpu, on me, a huge increase in file size and RAM usage, a terrible logistic situation with 30 files per level (or more, if I cut them up), the possibility that the already implemented dynamic shadows would have to go, etc. <br /><br />The dynamic shadows are visible all the time - the smooth camera movement would only be visible during very short intervals. It would still chew framerate all the time, though. <br /><br /><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029353#msg1029353">Quote from: Lee on June 08, 2014, 06:16:30 PM</a></div><div class="quote">That said, 30 layers? H-How? Do you have a single background element, like a chain, on each layer? If so couldn&#039;t you save such things as a sprite and set their position and depth through a map script on load? Or is it more like 10*(texture map+depth map+normal map)?<br /></div>Think of it more like a voxel matrix, or a 3D texture, and it makes more sense. Then each screen would be 1400*800*30 pixels. I guess that to most people the game looks very 2D, but if you look closely at some screenshots you&#039;ll notice that on the left side, you can see the inside of the wall, and on the right side too. That&#039;s the perspective in action. So the game is slightly 2.5D, perhaps.<br /><br />If I were to make everything separate sprites, the main problem wouldn&#039;t be chains and plants etc (though even those alone wouldn&#039;t really amount to 30, they&#039;d rather be in the hundreds) but the fact that a standard tile is 10 sprites on top of each other. A standard level will have something like 7000 tiles in it, so that&#039;d be 70 000 sprites, chains not counted&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/epileptic.gif" alt="Epileptic" border="0" /> <br /><br />Gah, you guys make me want to go back and try to solve this again! I&#039;ll talk to James though, maybe it will get a re-visiting but I should probably make some actual game mechanics before I dive too deep into the cosmetic stuff. In either case this latest big update has brought dynamic level sizes with it, and that will always be a necessary feature, no matter how we chose to display it&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /><br /><br /><hr /><br />A quick question to you programming people out there - is there a rule of thumb to what is best, saving data or calculating on the fly?<br /><br />Currently I&#039;m working with an AI map, a class that&#039;s attached to a level and which can be asked by AI entities for necessary information concerning specific tiles. Such information could be if the tile is a floor(on top of a solid tile), or if it has any special paths (don&#039;t know what to call them, a special path would be for example &quot;if a creature drops down from this specific climbable tile, it will land on this specific floor tile&quot;). In short, these queries will require asking neighboring tiles for their properties.<br /><br />Now I have two options - either I save all this information to the tile map on loading the level, or I calculate it every time I&#039;m asked for it. <br /><br />I understand that this basically is a decision between burdening the processor or the RAM, but maybe the burdens would be drastically disproportionate in favor of one solution?</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#608">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="609"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029555#msg1029555" target="_blank">jamesprimate on June 09, 2014, 11:32:51 AM (Last Edit: June 09, 2014, 11:41:58 AM):</a></b></td></table><br>hahah, but this is all &quot;re-do literally everything about the game to make this one camera mechanic smoother&quot;<br /><br />im pretty confident that once this solution is seen in the proper context it will look just fine. we&#039;ll see!</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#609">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="610"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029561#msg1029561" target="_blank">JLJac on June 09, 2014, 11:46:38 AM:</a></b></td></table><br>Thanks guys! I will go harder on the RAM than the CPU when all else equal from now on, then.<br /><br />On the parallax thing - yeah, that gif Zaphos posted. You can kind of see how you can&#039;t really bake that together into just 4 layers or something like that - it&#039;s not the classical &quot;some mountains at different distances,&quot; rather it&#039;s a voxel-like solution compromised of parallax layers. Rendering each tile by itself wouldn&#039;t really be feasible even if the 70 000 sprites were to work - the effects such as erosion are applied to the image as a whole, not to the individual tiles. In fact the effects are there for just that reason, to make the tiles melt together into a whole.<br /><br />Making the game actual 3D is theoretically possible, but I want to use the same level editor and assets as I already have. I really like the look of it, more perhaps than actual 3D. And as James says, that would be like making another entire game from start <i>again</i>, pretty much, this time with a technique I&#039;m totally new to.<br /><br />So...<br /><br />In honor of my habit of jumping between different task like a 4 year old, we now give the parallax some rest in favor of AI!<br /><br /><b>Update 252</b><br />I now have a class for mapping the shortcuts of a level, and for doing the AI map. This is a good healthy step forward, as the AI map is the foundation of the path finding the next thing I can start with (after setting up a lizard entity, which is a pretty small task) is actual path finding code. From there on everything will become inferno, but let&#039;s not live tomorrow&#039;s sorrows. <br /><br /><a href="/Rain-World-Devlog/Images/Archived Images/L7Vv.png" target="_blank"><img src="/Rain-World-Devlog/Images/Archived Images/L7Vv.png" alt="" width="400" height="300" border="0" /></a><br /><br />This AI map has most of the paths the lizards will use, though not the pup-specific paths such as horizontal jumping, though that&#039;s easily added later. The tiles are color coded according to a hierarchy, floor(green), vertical corridor(yellow), pole climbing(pink), wall climbing(blue), and ceiling climbing(red). The beauty of this hierarchy is that it&#039;s a linear increase of difficulty of terrain, any creature that can be in a pink tile for example, can also be in a yellow or green one. Ceilings and walls are reserved for the sticky toed breeds of lizards. <br /><br />The little dots represent paths that can be taken by different creatures. The little red ones pointing downwards for example symbolize that from here you can drop down and land on a floor. Pink downwards dot means that from here you can drop down and grab hold of a pole mid-air, if you&#039;re a creature with that kind of agility. <br /><br />As you see, this map limits the areas the path finder has to handle - there are few big open chunks of tiles where the path finder would chew away more slowly.<br /><br />Oh, and the mapper classes. What&#039;s cool about those are that they are asynchronized. In this version we&#039;re playing with the idea of split screen coop, and that means that as one player moves from one room to another, the show still has to go on for the other. We don&#039;t have the luxury of pausing everything and wait for it to load.<br /><br />Instead, when you start to enter a room these mapping classes will fire, and work in the background. As soon as they&#039;re finished they serve their room the product of their work, and the reference to them is nulled so they can be disposed by garbage collection. There will still be a small pause for the player moving from one room to another (unless I come up with a clever preloading system) but the other player can keep playing.</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#610">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="611"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029581#msg1029581" target="_blank">jamesprimate on June 09, 2014, 01:19:43 PM:</a></b></td></table><br>seems like people are getting a bit wrapped up in the mechanics of the 3d implementation rather than what it would bring to the game (this game, rain world). ie. not much.<br /><br />im sure everyone would agree that one of the most recognizable elements of rain world is the very unique art style, which is in some degree a direct result of the tools and methods being discussed right here. so changing all that, plus all the current tools assets and work, simply because there are other possible solutions to one very minor problem doesn&#039;t seem remotely reasonable. totally throwing the baby out with the bathwater. it would literally be making a completely other game.<br /><br />has anyone ever said &quot;this game sure is great, specifically because of those half-second transitions between screens&quot;? i suppose its possible, but i certainly haven&#039;t said it. <br /><br />anyway, i hope that doesn&#039;t sound too defensive. obviously all this feedback is super important (and please continue to do so!!), i just want to keep Joar from getting too bogged down defending technical choices made years ago that are now fundamental aspects of the game. cuz he&#039;s got a looooot of other work to do!&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/screamy.gif" alt="Screamy" border="0" /></div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#611">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="612"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029673#msg1029673" target="_blank">JLJac on June 09, 2014, 11:08:03 PM:</a></b></td></table><br><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029570#msg1029570">Quote from: Zaphos on June 09, 2014, 12:18:22 PM</a></div><div class="quote"><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029561#msg1029561">Quote from: JLJac on June 09, 2014, 11:46:38 AM</a></div><div class="quote">I will go harder on the RAM than the CPU when all else equal from now on, then.<br /></div>Just want to re-emphasize that this is oversimplified advice ...<br /><br />Accessing your RAM can cost on the order of ~100-300 clock cycles if it&#039;s not already in your L1 or L2 cache.&nbsp; You likely have &gt;1GB of ram to work with but maybe only ~256kb of L2 cache per core.&nbsp; If you precompute a lot, you need to consider how you access what you&#039;ve precomputed, as that determines how often you&#039;ll get cache misses when accessing it.<br /></div>Tell me more! Do I even have that kind of control in c#?<br /><br />@Lee, given that Futile uses polygons to display the sprites, what would be the big difference between my current setup and &quot;2D texture planes&quot;? In Zaphos gif you see 30 2D texture planes, essentially. If you&#039;re talking about having pixel art textures and make actual 3D models I&#039;m pretty confident I don&#039;t want to do that, both because of the mentioned reasons and because actual 3D models would change the art style. I think the current art style goes better with the characters, and wouldn&#039;t want to change it for 3D. <br /><br />When it comes to tile based approaches, I&#039;m not too keen on those either, as the very point of this visual experience is that everything should be molten to a mess. If you guys can see potential to cut it up into tiles, that means it&#039;s not eroded enough!&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/wink.gif" alt="Wink" border="0" /><br /><br />The main point here is that the 30 layers are here to stay. I could perhaps cut them up into smaller pieces or something, but the basic issue that the file sizes would be huge and the implementation nightmarish remains. <br /><br />I know for a fact that it would be considerably heavier performance wise, if I do it as separate sprites, as a shader, or whatever solution I come up with. And I also know that I would prefer to put those extra processor cycles towards AI and actual gameplay aspects rather than a very superficial cosmetic. With stuff like parallax scrolling people tend to go &quot;ohh, cool&quot; the first time they see it, but it wears out pretty quickly. Being able to create a greater diversity of gameplay scenarios (15 lizards in a pit or something) seems more worthwhile. So while I&#039;d like a moving camera, I kind of don&#039;t see how it would be worth it, especially as I think a static camera could be <i>made </i>to work.<br /><br />That said, I might very well try to implement it some time along... Especially if we do split screen, the cameras will have to scroll <i>either way</i>, and then it might become worth it to really go that extra mile to make it look good. As you&#039;ve probably noticed I&#039;m not very focused in my work, I jump back and forth and return to stuff every now and then. Because I&#039;m the only developer I think I should use the luxury to be able to work like that - and also it might make the devlog a little more entertaining. So if I get a sudden idea, or if someone presents the perfect solution, I could jump back to the parallax any day.<br /><br />Oh, and don&#039;t censor yourself, the idea of the thread is to talk to people with ideas and opinions! </div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#612">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="613"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029727#msg1029727" target="_blank">JLJac on June 10, 2014, 05:00:09 AM:</a></b></td></table><br>Maybe for the path finding it would be fun to try? The A* is a bunch of lists of countless very small, possibly value-type data structures, so it might be fitting? I have to admit though, I&#039;m still not entirely sure how to identify a bad implementation from a good one, and I have no idea how to test if I&#039;ve succeeded, so I&#039;d basically be working in the blind. Is there are profiler that can count cache misses in specific parts o the code?<br /><br />Ok, so let me give you my idea on how I think this works and you guys can tell me if I&#039;ve gotten it right.<br /><br />Let&#039;s say each tile in my pathfinder has three values, int generation, int value and bool reachable.<br /><br />Instead of the OOP approach, where I&#039;d create a struct <br /><div class="codeheader">Code:</div><div class="code">public struct PathingTile<br />{<br />&nbsp; public int generation;<br />&nbsp; public int value;<br />&nbsp; public bool reachable;<br />&nbsp; public PathingTile(int g, int v, bool r)<br />&nbsp; {<br />&nbsp; &nbsp; generation = g;//by the way, is there anyway I can assign those right away to the&nbsp; construct params rather than having to have those useless little intermediate variables?<br />&nbsp; &nbsp; value = v;<br />&nbsp; &nbsp; reachable = r;<br />&nbsp; }<br />}</div><br />and then do an array populated by those<br /><br /><div class="codeheader">Code:</div><div class="code">public PathingTile[,] aiMatrix = new PathingTile[50, 42];</div><br />and repeat over it for operations<br /><br /><div class="codeheader">Code:</div><div class="code">for (int i = 0; i &lt; width; i ++)<br />&nbsp; &nbsp;for (int a = 0; a &lt; height; a ++)<br />&nbsp; &nbsp; &nbsp; DoThing(aiMatrix[i, a]);</div><br />I&#039;d do it differently. Maybe something like this:<br /><br /><div class="codeheader">Code:</div><div class="code">public class PathFinder<br />{<br />&nbsp; &nbsp;public int width = 50;<br />&nbsp; &nbsp;public int height = 42;<br /><br />&nbsp; &nbsp;public int[,] generations;<br />&nbsp; &nbsp;public int[,] values;<br />&nbsp; &nbsp;public bool[,] reachables;<br /><br />&nbsp; &nbsp;public PathFinder()<br />&nbsp; &nbsp;{<br />&nbsp; &nbsp; &nbsp; &nbsp;generations = new int[50,42];<br />&nbsp; &nbsp; &nbsp; &nbsp;values= new int[50,42];<br />&nbsp; &nbsp; &nbsp; &nbsp;reachables= new bool[50,42];<br />&nbsp; &nbsp;}<br /><br />&nbsp; &nbsp;public void Update()<br />&nbsp; &nbsp;{<br />&nbsp; &nbsp; &nbsp; for (int i = 0; i &lt; width; i++)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for (int a = 0; a &lt; height; a++)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; doGenerationThing(i, a, generations[i, a]);<br /><br />&nbsp; &nbsp; &nbsp; for (int i = 0; i &lt; width; i++)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for (int a = 0; a &lt; height; a++)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; doValueThing(i, a, values[i, a]);<br /><br />&nbsp; &nbsp; &nbsp; for (int i = 0; i &lt; width; i++)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for (int a = 0; a &lt; height; a++)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; doReachableThing(i, a, reachables[i, a]);<br />&nbsp; &nbsp;}<br />}</div><br />Do I get it?</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#613">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="614"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029781#msg1029781" target="_blank">JLJac on June 10, 2014, 09:34:55 AM:</a></b></td></table><br><b>Update 253</b><br />A reasonably good day! Got a placeholder path finding class down, called &quot;quick pathfinder&quot;. This one doesn&#039;t really have all the cool stuff as the final AI pathfinders will, but it has allowed me to test the concept. <br /><br />The actual AI is going to use a persistent map and overlay path searches on top of each other continuously (more on this when we get around to it) while this class is just given a start position and a goal position on spawn, and then works with trying to find a path between those. For the real AI my sense of tidiness would never allow spawning an object like this each time I want a path just to throw it away later, and it isn&#039;t good at doing dynamic path finding with both the goal and start positions moving as it works. Rather I plan to have the game use this object to analyze <i>if </i>it&#039;s possible to get from one point of the map to another, which will come in handy for some things I have in mind for later.<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/LiveGloomyAmericanblackvulture.gif" alt="" width="600" height="450" border="0" /><br />(trying a new image service here, hopefully the pic will stay up)<br /><br />As you can see, this object too works over the course of several frames. The only thing it has accessible to other objects is a status integer, which can be 0(working), 1(path found) or -1(finished, didn&#039;t find a path) and a function that if applicable retrieves the path as an array of tile positions.<br /><br />It can also work within a single frame, then it&#039;s just a matter of looping until the status isn&#039;t 0 any more. The next step is to be able to feed it a list of accessibility info (&quot;I can&#039;t climb on walls, please give me a path that doesn&#039;t require that&quot;).<br /><br />Oh, and those jumpy things are the lizards! Albeit under construction... Intimidating though, aren&#039;t they!? <img src="/Rain-World-Devlog/Images/Smileys/whome.gif" alt="Who, Me?" border="0" /><br /><br /></div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#614">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="615"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029832#msg1029832" target="_blank">JLJac on June 10, 2014, 12:41:59 PM:</a></b></td></table><br>Ah, of course, I should&#039;ve figured! Because it&#039;s basically an array of arrays, right? And now I load an entire row just to get one column tile, and that&#039;s not very efficient...<br /><br />But if I use a singleton I won&#039;t be able to spawn a bunch of these babies and have them work in the background during runtime, am I right? Then it would all have to happen withing a frame, and if the level is big and mazelike that frame might take a while!</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#615">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="616"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029937#msg1029937" target="_blank">JLJac on June 10, 2014, 11:03:24 PM:</a></b></td></table><br>Does this have to do with multithreading? o_0 Talking of which, should I perhaps use multithreading for something? Like mapping the levels, or pathing? It seems like a waste to have all these processors just sitting there... But I figure the compability between different hardwares would take a hit.<br /><br />Thanks for the AWESOME a* link! For my game I need super control of the pathfinding, as the AI taps into it quite a lot it can&#039;t be as encapsulated, so I won&#039;t use this code as is. That said, reading the code is extremely interesting. It seems the implementation is in fact very similar to mine, which maybe isn&#039;t that big of a surprise seeing how A* is pretty tried and true. But he does some things that are pretty awesome - for example he doesn&#039;t use a multidimensional array, instead he uses a linear one and fetches the right position like this<br /><br /><div class="quoteheader">Quote</div><div class="quote">arrayIndex = thisX + (thisY + thisZ * worldTotalY) * worldTotalX</div><br />which I guess would be because of the cache optimization thing you guys mentioned earlier?<br /><br />Oh, and he doesn&#039;t store the open nodes as a sorted list, but as a <i>heap</i>. There&#039;s something here I&#039;m not getting, as he doesn&#039;t seem to keep track of the already evaluated nodes, instead he just have the linkage mechanic of the heap structure organically flow over into creating a linked <i>path </i>somehow... Soooo cool.</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#616">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="617"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029944#msg1029944" target="_blank">JLJac on June 10, 2014, 11:38:43 PM:</a></b></td></table><br>Pathfinders! <img src="/Rain-World-Devlog/Images/Smileys/hand-shake-l.gif" alt="Hand Shake Left" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/cheesy.gif" alt="Cheesy" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/hand-shake-r.gif" alt="Hand Shake Right" border="0" /><br /><br />Yeah, I deciphered the heap now. Damn, this thing is elegant. It&#039;s OK for me to use some of his methods, right?</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#617">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="618"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029956#msg1029956" target="_blank">JLJac on June 11, 2014, 02:10:51 AM:</a></b></td></table><br>I can draw from this, but because of some rain world specific stuff I&#039;ll have to do a hybrid solution that&#039;s not quite as lean as this is. For example I&#039;ll have to use an integer array rather than one of bools, and a few other tweaks to accommodate for slightly more complex stuff going on than just tile-by-tile, equally weighted, pathfinding. I&#039;ll get into more detail when I do a proper update.<br /><br />It was a super good source of inspiration. Especially the idea with the heap, which I wouldn&#039;t have come up with in a million years. Thanks&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/smiley.gif" alt="Smiley" border="0" /></div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#618">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="619"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1029998#msg1029998" target="_blank">JLJac on June 11, 2014, 06:09:52 AM:</a></b></td></table><br>@dancing_dead, do you have the email of the guy? I think I found a bug.</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/031#619">[Message link]</a></div></div><div class="sidebar"></div></div><br></body>