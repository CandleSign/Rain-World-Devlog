<head><title>Rain World Devlog</title><link rel="icon" href="/Rain-World-Devlog/Images/Archived Images/ljrr7.jpg"><link rel="stylesheet" href="/Rain-World-Devlog/css/style.css"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Rain World Devlog Archive"></head>
<body class="body">
<div class="header"><span id="pagelist"></span>&emsp;&emsp;&mdash;&emsp;&emsp;<img src="/Rain-World-Devlog/Images/Title.png">&emsp;&emsp;&mdash;&emsp;&emsp;<a href="/Rain-World-Devlog/Home">Home</a></div><script src="/Rain-World-Devlog/js/pagelist.js"></script><script src="/Rain-World-Devlog/js/header.js"></script><br>
<a name="680"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1049498#msg1049498" target="_blank">jamesprimate on August 08, 2014, 04:28:15 AM:</a></b></td></table><br><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1049238#msg1049238">Quote from: JLJac on August 07, 2014, 06:32:22 AM</a></div><div class="quote">An example would be that a dumb green lizard probably shouldn&#039;t be able to be too clever about how you&#039;re able to climb and it&#039;s not. Instead it should assume that you have the same limitations it has, and emulate your ghosts with its own terrain preferences. That way when you climb up and away from the area it&#039;s searching, the proper reaction should be confusion.<br /></div><br />classic green lizards!<br /><br />very cool visualization. how do you suppose that system scales? it is something light-weight enough to run, say, 15-20 instances each with 15 ghosts?</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#680">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="681"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1049548#msg1049548" target="_blank">JLJac on August 08, 2014, 08:05:43 AM (Last Edit: August 08, 2014, 08:18:35 AM):</a></b></td></table><br>I think so! Also I&#039;ve noticed that the search behavior doesn&#039;t change much from 2 ghosts and up, so I think 3 or 4 ghosts would be just fine. Also, for creatures that the tracking creature doesn&#039;t have much interest in (neither prey nor threat) tracking just 1 ghost or none at all will save some space, if that becomes an issue.<br /><br /><b>Update 285</b><br />Made the ghosts work between different rooms.<br /><br />Created a system which gives ghosts a &quot;second chance&quot; before dismissing them on visual contact - this second chance consists of scurrying away very quickly hoping to find an obscured tile. This comes in handy when a ghost is sitting for example next to a short cut entrance, in that case it makes more sense to just move the ghost in through the shortcut when it&#039;s seen, rather than remove it. Its score is however downgraded, so the hypothesis of that particular ghost is considered less likely.<br /><br />When I had this &quot;second chance&quot; system in place, I decided to have that apply to the last existing ghost <i>always</i>, and never delete it. This means that the tracking creature will always have some theory about where the tracked creature might be, though the hypothesis is considered more and more unlikely.<br /><br />By having the lizard follow the &quot;best guess&quot; ghost of the player, I managed to have it display some pretty cool search behavior.<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/Sx62o.gif" alt="" border="0" /><br /><br />The little pink number is the estimated chance of relocating the player - this will play a part in actual AI decisions later, such as when it&#039;s time to abandon a hunt. The chance is calculated using an average number between the amount of ticks since the player was last spotted and the lowest generation among the ghosts (times ten). This means it takes both pure time and how much effort it has actually put into looking for the player into account.<br /><br />Inspired by the Utility Based AI stuff, I made this curve for evaluating that probability:<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/Nfxt3.png" alt="" border="0" /><br /><br />Up until the intersection (45 in the image) it follows the red curve, after that the blue one. This means that during the very first seconds it will estimate the chance of re-locating the creature as pretty high, then it will start to drop quickly. Then the blue curve kicks in, which never actually reaches 0, just gets closer and closer to it.<br /><br />The idea is that the Tracker will always be able to suggest some small chance of finding any given creature and a coordinate to start looking, even though the search is more or less futile. This way I can make sure that all the decisions are actually made in the decision making AI. If the Tracker could &quot;give up&quot; that would essentially mean that the Tracker made the decision to stop looking for that creature, which isn&#039;t its job.<br /><br />Here&#039;s a gif of the lizard prototype trying to search for a player that has been removed from the map. The estimated probability goes down, but it could theoretically continue this search for ever and ever unless told otherwise. Note how the search is first focused to the nearby area to where the creature was last spotted, but later moves on to further away areas as all of those options are exhausted.<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/9qTsl.gif" alt="" border="0" /></div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#681">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="682"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1049834#msg1049834" target="_blank">jamesprimate on August 09, 2014, 09:08:26 AM:</a></b></td></table><br>I love it when devlogs get real like this, with people breaking out the the graphs and the log and the curve functions</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#682">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="683"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1050450#msg1050450" target="_blank">JLJac on August 11, 2014, 08:02:09 AM:</a></b></td></table><br>Oh, but the point is that after the plateaux it should become a 1/x type of curve, that approaches 0 but never gets to it ... I really love your graph tool! Which one is it?<br /><br /><b>Update 286</b><br />Today wasn&#039;t the best day, as I spent quite a lot of it messing with flight tickets and online payment and stuff. Still got somewhere though! Tied together some lose ends in the Tracker module, and fixed a few errors where it would throw null reference exceptions. Also made it able to call out to its parent AI when a creature is spotted, with a distinction between first time spottings and spotting a creature that it&#039;s already aware of.<br /><br />With this a pretty cool mile stone is reached - the shared AI assets are done! That would be the Path Finder and the Tracker, which are AI modules that are going to be used by pretty much every AI creature. There&#039;s an asterisk after done, as they will be revisited to accommodate for the needs of the individual creatures, but they are done as far as they can be before starting on making the creatures. This means that the next step is a step away from these boring generic functions - now I can actually start creating some content! The first creature up is the lizard, I imagine. Stay tuned!</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#683">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="684"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1050756#msg1050756" target="_blank">JLJac on August 12, 2014, 08:08:43 AM:</a></b></td></table><br><b>Update 287</b><br />Lizard animations are slowly coming together. But also I spent 40 minutes chasing my own tail (<b>WHHHHHYYYYYYY DOEEEEEEESSSSS THISSSSSS VARRRRRIIIIABLLLEEEE <i><span style="text-decoration: underline;">CHAAAAAAAAAAAANNNNGEEEE</span></i>!!!?!?!?!?!?</b>)before finding out that I had put a 1 instead of a 2 in a specific spot - the line was copied from another place and I hadn&#039;t gotten around to change that specific digit. By the time I found out I had commented out pretty much every line in the entire game, disabling physics, gravity, and the very force that holds creatures together. The game was reduced to some floating body parts drifting in and out through the walls. So then I had to repair everything after my furious bug hunt.<br /><br />It&#039;s crazy how focused I get when something like that happens... Nothing matters except squashing that one bug. <br /><br />Speaking of bugs, another old friend has returned: when enabling the lizard flip (when they turn 180 degrees on a flat floor) the good old behavior where they just LOVE to do that flip over and over has resurfaced. They&#039;ll see me, do a flip for fun, another flip in the other direction, then one more just for the hell of it, and then they need to do a last one so they&#039;ll actually face the correct direction before they start moving. It looks ridiculous. Giving the flip animation a pathing weight corresponding to walking seven times around the world doesn&#039;t seem to work, they just love the flipping all that much. Last time I came up with some weird solution where I wouldn&#039;t allow it to flip close to where it flipped the last time, but that was a hack, this time I&#039;ll try to find out what&#039;s actually going on...</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#684">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="685"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1050928#msg1050928" target="_blank">jamesprimate on August 12, 2014, 07:55:59 PM:</a></b></td></table><br>id say thats a fair assessment </div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#685">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="686"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1051107#msg1051107" target="_blank">JLJac on August 13, 2014, 11:34:46 AM:</a></b></td></table><br>98% autobiographic.<br /><br /><b>Update 288</b><br />Ok, got some good progress today, even though it isn&#039;t much to look at. Quite a lot of the lizard animations are in now - it&#039;s able to walk, climb, crawl, turn on flat surfaces, reach across gaps horizontally and vertically, and drop down to floors below it (though not very gracefully). Coming up is the ability to drop to pipes and grab them mid air, this always fails miserably as it is. I might have to nail the upper body to the grab spot for a few frames so the lower body can do a cool swinging motion before the lizard gains control and gets up on the pipe.<br /><br />What&#039;s cool here is that the creature is made into a physical object with forces pulling it along, rather than just a ghost like sprite floating along. It&#039;s really fun already to throw spears at it and see how it tries to re-adjust and find new footing to continue moving. <br /><br />The body physics are going to be cooler than in the old game. Whenever no body segment is inside a tile that&#039;s considered legal to that lizard, a &quot;framesInLegalTerrain&quot; counter is set to 0. When any segment is legal, it starts ticking.<br /><br />If this &quot;framesInLegalTerrain&quot; is above 10 (numbers are subject to change/diversity between lizard breeds) the physics behave differently - it is assumed that the lizard is in total control of its situation, and the velocities of the body segments are slowed down each frame, and they aren&#039;t affected by gravity. The body basically &quot;floats&quot; around. If the value is less than 10 though, the body behaves as any physical body in the game, and can be tossed around the level. Basically I&#039;m trying to get a good balance between the lizard being an agent and a physical body, where it&#039;s supposed to behave like a little bit of both.<br /><br />In this gif I&#039;m tossing a lizard around as it tries to traverse this courtyard - whenever I press a button it&#039;s pulled towards the mouse pointer. The idea is that it should be able to continue moving towards its goal despite being antagonized like this - it shouldn&#039;t get stuck or be unable to adapt to a new situation.<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/CookedFrenchCur.gif" alt="" border="0" /></div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#686">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="687"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1051407#msg1051407" target="_blank">JLJac on August 14, 2014, 11:10:39 AM:</a></b></td></table><br><b>Update 289</b><br />Lizard movement is now basically working as I intended it to. Dropping from ledges, grabbing, and all that stuff is in and reasonably cool looking for pink boxes. <br /><br />Other than that efforts have been somewhat unfocused today - I&#039;ve started many things and finished few. Flipping back and forth has been sorted by having the lizard have a counter set to something like 2 seconds when flipping, and during that time the path finder will assign the flip move a last resort status. <br /><br />The embryo of an engine that will understand when the creature has gotten stuck is started on but not more. The idea here is that when a creature gets stuck it will be able to understand where and possibly even why it got stuck, and then be able to actually do something else rather than just trying the same thing over and over. It&#039;s actually a little bit of learning, but it will basically boil down to &quot;not getting stuck as much&quot; rather than anything mind blowing. More on that when I actually get to it. <br /><br />The last unfinished effort of the day was starting on the system for dividing the lizard into separate breeds. This took some thinking; where to put the division in the code? The current solution is that each lizard breed has its own Creature Template, all of which inherit from a parent Creature Template, and that they <i>also </i>own a <a href="http://gameprogrammingpatterns.com/type-object.html" target="_blank">Type Object</a> containing some breed-specific parameters. We&#039;ll see how that works out!</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#687">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="688"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1051769#msg1051769" target="_blank">JLJac on August 15, 2014, 11:01:21 AM:</a></b></td></table><br><b>Update 290</b><br />Got some lizard breeds in! It&#039;s funny how just some small differences in speed, size etc drastically change the personalities you project on these boxes. They still suffer from quite a lot of getting stuck everywhere, but it&#039;s getting there!<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/IdioticUnfortunateGreathornedowl.gif" alt="" border="0" /><br /><br />Also, these inheritance based generalized systems... wow. Having laid out the general frame work, it really is super fast to define stuff! If I&#039;m going to want another lizard breed down the line, it&#039;ll be like a day to add it! </div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#688">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="689"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1051915#msg1051915" target="_blank">jamesprimate on August 15, 2014, 07:49:36 PM:</a></b></td></table><br><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1051769#msg1051769">Quote from: JLJac on August 15, 2014, 11:01:21 AM</a></div><div class="quote"><b>Update 290</b><br />Got some lizard breeds in! It&#039;s funny how just some small differences in speed, size etc drastically change the personalities you project on these boxes. They still suffer from quite a lot of getting stuck everywhere, but it&#039;s getting there!<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/IdioticUnfortunateGreathornedowl.gif" alt="" border="0" /><br /><br />Also, these inheritance based generalized systems... wow. Having laid out the general frame work, it really is super fast to define stuff! If I&#039;m going to want another lizard breed down the line, it&#039;ll be like a day to add it! <br /></div><br />Joar, you don&#039;t even know how happy this gif makes me&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/tearsofjoy.gif" alt="Tears of Joy" border="0" /></div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#689">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="690"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1051974#msg1051974" target="_blank">JLJac on August 16, 2014, 01:17:37 AM (Last Edit: August 16, 2014, 01:25:51 AM):</a></b></td></table><br><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1051915#msg1051915">Quote from: jamesprimate on August 15, 2014, 07:49:36 PM</a></div><div class="quote">Joar, you don&#039;t even know how happy this gif makes me&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/tearsofjoy.gif" alt="Tears of Joy" border="0" /><br /></div> <img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-l.gif" alt="Hand Thumbs Up Left" border="0" /> <img src="/Rain-World-Devlog/Images/Smileys/cool.gif" alt="Cool" border="0" /><br /><br /><div class="quoteheader"><a href="https://forums.tigsource.com/index.php?topic=25183.msg1051893#msg1051893">Quote from: Slader16 on August 15, 2014, 05:53:35 PM</a></div><div class="quote">It&#039;s looking more and more like Rain World with every update! <br /><br />Quick question though, it seems like for the A.I./Slugcat/Pathfinding/etc you are creating new solutions, completely different from the Lingo build. My question is, why? Is it because you&#039;re using Unity now? Or maybe that you realized that the Lingo version was inefficient? (I&#039;ve been wondering this for a while now, so I hope it&#039;s not confusing <img src="/Rain-World-Devlog/Images/Smileys/tongue.gif" alt="Tongue" border="0" />) <br /></div>The reason why I&#039;m re-working a lot of the solutions is that in the old build, I never intended to have more content. Everything I added was &quot;the last thing before I&#039;m gonna ship this&quot;, meaning that I never did generally applicable solutions, only patch work and quick fixes for whatever I had in front of me at the time. In the end the bulk of the game ended up being band-aids on band-aids, meaning that the machinery <i>worked </i>alright, but whenever something was to be changed or added, it was a mess.<br /><br />This time around, I&#039;m making generalized systems for everything, such as path finding. This means that down the line, if I want to for example add a creature, I can just plug in the path finder, and bam, it&#039;s up and running (after three hours of tweaking, so maybe not BAM, but way faster than building it from the ground up). If there is a bug in said path finder, it will have to be fixed in just <i>one </i>place, rather than one for each creature.<br /><br />And when I&#039;m at it, of course I&#039;m taking the re-write as an opportunity to do some optimizations. I&#039;m not really &quot;using Unity&quot; from how I understand it, I&#039;m using it for rendering sprites and I use some of its C# library, but I&#039;m not doing anything in the Unity editor. However I am converting the game, from Lingo to C#, so while I can glance at the old code I in fact have to re-write everything. For the slugcat I did a straight port of the old movement behavior, but with the lizard I&#039;m not quite as thrilled about the old physics, so I&#039;m taking this opportunity to do some changes.<br /><br />Edit: Oh, and a question for you seasoned programmers out there - I think I have an infinite loop somewhere in my code. Unity just freezes, and it&#039;s really hard to find what&#039;s causing it because each time I have to force exit with the task manager and restart everything. It&#039;s somewhere in the lizard code, because it only happens when there are lizards... Are there any ways to find infinite loops? Can you for example tell the monodevelop debugger to throw an exception if any loop has run more than 1000 times, so I can find where this thing is hiding?</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#690">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="691"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1052533#msg1052533" target="_blank">jamesprimate on August 18, 2014, 01:56:36 AM:</a></b></td></table><br>the thing that was posted was WAAAAY old (like, years) and wouldnt be any sort of representation. even the builds we&#039;re showing at PAX and such are 6-7 months old at this point and in a completely other programming language! a lot has changed, so let us get rain world to a point where we are proud to show it!</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#691">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="692"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1052585#msg1052585" target="_blank">JLJac on August 18, 2014, 06:45:32 AM:</a></b></td></table><br>Absolutely&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/grin.gif" alt="Grin" border="0" /><br /><br /><b>Update 291</b><br />Found that darn bug! Thanks to Gimym JIMBERT, as always! In one place I made a division with a counter that could, at times, be 0. Contrary to throwing an error, as I&#039;m used to from director, it set the value to NaN. In this case that value was the vertical velocity, which was then applied to the vertical position, and then at the end of the frame when it wanted to check terrain collision it had to loop through all the tiles from negative infinity to where the object was at, and that&#039;s the infinite loop. It wasn&#039;t really infinite though, given a few years it might have completed&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/cheesy.gif" alt="Cheesy" border="0" /><br /><br />Other than that, further work on assorted anti-getting-stuck measures. The current task - if having moved into a dead end, the lizard should start moving backwards, and continue moving backwards through bends and corners until it reaches an intersection and can pick another direction. Proved to be somewhat tricky, but I have a few ideas!</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#692">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="693"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1052931#msg1052931" target="_blank">JLJac on August 19, 2014, 11:32:54 AM:</a></b></td></table><br><b>Update 292</b><br />Finally I&#039;ve gotten to work on the lizard cosmetics!<br /><br /><table class="lostimage"><td><img src="/Rain-World-Devlog/Images/LOST IMAGE.png" width="150px" alt="" border="0"/></td></table><br /><br />There is some kind of tail now!<br /><br />James and I have also been having a few talks today. One of them was about was about individual variation on creatures. We both like the idea that each creature should have slight individual deviances, probably from a random seed, to make them look less like clones. <br /><br />The problem as I see it is this - we have the breeds of lizards. The idea is that the player should be able to learn the behavior of each breed. &quot;Greens are slow and dumb&quot; for example, or &quot;Blues can&#039;t take much abuse, but can climb walls&quot;. What I worry about is two scenarios. One is that individual differences drowns the breed traits, so that everything becomes a random sludge. The other is that in order to not end up in the random sludge, we will need to make the individual traits so very small that they are actually not significant in any way, and then the effort was in vain.<br /><br />One solution is to have the differences be purely cosmetic. Short tail, long tail, that sort of stuff. This is safe, so I think we might do this kind of stuff regardless.<br /><br />Another is to have somewhat rare, but very <b>clear </b>unique individuals that appear late in the game when you&#039;ve already come to know the categories. That would be stuff like &quot;It is very clearly a blue lizard in every part of its behavior, but it&#039;s large as a green lizard&quot;. The kind of stuff that can be easily understood by an experienced player. This solution would probably take on a bit of a flavor of &quot;bosses&quot;, as these deviant individuals are likely going to be mostly harder than regulars, and the element of unfamiliarity and surprise will play in their favor either way.<br /><br />The jury is still out on this one, and luckily the jury probably have quite a lot of time to think about it before it&#039;s time for an implementation. But it&#039;s never a bad thing to plan ahead! <br /><br />What do you guys think?</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#693">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="694"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1053184#msg1053184" target="_blank">JLJac on August 20, 2014, 10:27:29 AM:</a></b></td></table><br>Stop me before we get there!<br /><br /><b>Update 293</b><br />Feet are in! And some more sophisticated tail animation.<br /><br />This time around I decided I wanted to give the lizard breeds more characteristic walks. They are all a tad slow at this point I think, that is a gameplay balance question that will be tweaked a lot later. Quite a lot of the stuff that&#039;s supposed to be in isn&#039;t yet - for example they are supposed to move with different efficiency when occupying different terrain (pink <i>can </i>climb on poles, but it&#039;s somewhat slow and clumsy) and when moving in different directions (green is considerably slower in any vertical movement that requires it to lift its heavy body). <br /><br />Here&#039;s the pink lizard with legs. It&#039;s a bit boring and anonymous in my opinion - which it&#039;s partly supposed to be as pink is the default, but it could have something more going on, definitely. Remember that this is just movement through the terrain, so they still don&#039;t have much to work with to convey personality.<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/7Hz1.gif" alt="" border="0" /><br /><br /><br />Here&#039;s the green one. It&#039;s heavier, slower, and moving more unevenly. It also lifts its feet with each step, sometimes resting on its belly for a moment between steps. Green is also supposed to have a stiffer tail than the others, to give it a bit of an alligator feel contrary to the soft gecko bodies of most of them. Can you tell?<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/tLAYi.gif" alt="" border="0" /><br /><br /><br />Blue has a rapid, even, smooth movement where all four limbs are constantly working. You might also notice how it&#039;s able to grab on to walls, and how it is more agile and more inclined to climb. <br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/jFqZR.gif" alt="" border="0" /><br /><br /><br />So much fun! I was dying to get back to this kind of stuff :D The feet still have some weird flickering at times, and I&#039;m not sure how happy I am about when the legs overlap each other perfectly, so there is still tweaking to do. For fun, here&#039;s one of them moving together:<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/i1q9.gif" alt="" border="0" /><br /><br />You might notice that the interactions still feel a little blocky and uneven. There are some getting stuck scenarios left, especially as the lizards are not aware of each other at this point. When two of them get in a deadlock pushing against each other they have no protocol for what to do in that situation. But you can see some interesting stuff too, such as how the green one is way heavier than the blue one and pushes it out of the way without any impact on its own movement. In the future I hope to create a really interesting dynamic between lizards, having them getting annoyed with each other and whatnot. </div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#694">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="695"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1053187#msg1053187" target="_blank">jamesprimate on August 20, 2014, 10:42:36 AM:</a></b></td></table><br>this is so massively exciting. i seriously cant believe this is ONE DAY after that last post.</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#695">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="696"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1053197#msg1053197" target="_blank">JLJac on August 20, 2014, 11:18:36 AM:</a></b></td></table><br>Yeah, this is not behavior, just movement. They have no AI at this point, so your observation is correct&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-r.gif" alt="Hand Thumbs Up Right" border="0" /> </div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#696">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="697"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/jamesprimate.jpg" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1053264#msg1053264" target="_blank">jamesprimate on August 20, 2014, 03:02:24 PM:</a></b></td></table><br>one thing joar and i were talking about earlier is the difference in stride between the lingo lizards and these. <br /><br />previously, locomotion was done via a sort of faked &quot;ghost pull&quot; situation, meaning that the lizard walk was basically the body being dragged along the ground. now in the new version there are nice actual legs to walk on, and so the stance and stride of the lizard has changed a little. HAS SCIENCE GONE TOO FAR??<br /><br />this is all adjustable though, so your guys opinion on the &quot;feel&quot; of new lizards stride vs the old could be really helpful! <br /><br />to me the new lizards look much more agile, which could make them appear even more threatening (and thats a good thing of course!) maybe a mix of some low and some high? keep the slower lizards close to the ground and the faster ones with the more agile stance? wot u think</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#697">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="698"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1053451#msg1053451" target="_blank">JLJac on August 21, 2014, 06:17:16 AM:</a></b></td></table><br>@Loren Schmidt, yeah, that sounds a lot like what I&#039;ve been trying to do, but I might have to throw a few more counters in there to get a good rhythm to it o.0 Are you doing procedural animation too?<br /><br />@Kytin, interesting idea! Maybe we could keep physical traits and &quot;personality&quot; separate, and only have the latter be individual...<br /><br /><b>Update 294</b><br /><br />I made a couple of pretty big infra structure changes, such as moving all of the lizard breed definition stuff to the same place. Now there&#039;s a static class which is fed a lizard color and returns the complete template, all of it based on one huge enum switch. Maybe not the most elegant solution, but it works flawlessly and is only supposed to run once when the game is started up.<br /><br />Also got the thing where lizards have different speeds in different terrain and when moving in different directions down. At this point it averages between the terrain type that each of the three body chunks occupy.<br /><br />Oh, and sometimes you just have to do something that doesn&#039;t make any sense to the schedule, but you want to do just for fun! So I made the lizards&#039; limbs have health, and go limp and useless if they&#039;re too low. <br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/SpiritedAstonishingKitten.gif" alt="" border="0" /><br /><br />This is going to be really cool later, when spears and stuff is in... Note how one of the front legs is sometimes working, sometimes not - when they have low health, but not 0, they&#039;re switched on and off a bit like that.<br /><br />The other thing I got started on today was an obstacle tracker. Because of the physics based nature of RW, not everything is very predictable, and even after me trying to eliminate all the getting stuck scenarios, there will be some obscure getting stuck scenarios left. The obstacle tracker isn&#039;t only there to patch over problems I&#039;m too lazy to fix, though <img src="/Rain-World-Devlog/Images/Smileys/wink.gif" alt="Wink" border="0" /> It plays a part in making the NPC&#039;s seem more intelligent over all, and makes them able to account for some weird unpredictable scenarios that might occur in any game session. What it basically boils down to is being able to identify that a certain move is not possible after a number of failed attempts, and trying something else.<br /><br />This (rather tragic) gif shows a lizard that tries to climb up to the player, but is rather unsuccessful due to its limbs being disabled. The gif is sped up, because without functioning limbs the lizard is really slow.<br /><br /><img src="/Rain-World-Devlog/Images/Archived Images/CleverHeartyIcterinewarbler.gif" alt="" border="0" /><br /><br />Whenever a move fails, the destination tile is reported (red in the gif). After being reported a certain amount of times, the tile is marked as an obstacle (yellow) and the path finder is told to restart. This time around the yellow tiles will have a higher cost assigned to them.<br /><br />This means that after trying to climb a couple of times, the lizard concludes that &quot;OK, this isn&#039;t working&quot; and decides to take another way up. This system works no matter what the obstacle is - if it&#039;s lame limbs, a stream of water, some heavy creature grabbing on to the lizards tail, anything. <br /><br />This multiusability is both its strength and its problem - the lizard still isn&#039;t very smart about cause and effect. A smart lizard would deduce that <i>climbing </i>was the problem, not these specific tiles. With this system it might very well go to another climbing pole and try that before realizing that it has to get up some other way.<br /><br />The point is, however, that this is a fallback. If I want to make the lizard able to understand that it can&#039;t climb without functioning limbs, that&#039;s something I&#039;d write specifically in the AI ( if (functioningLimbs &lt; 4) noClimb = true; ) &nbsp;but for all the scenarios I won&#039;t be able to predict, this fallback solution is a lot better than infinitely trying to get past some impossible hurdle. <br /><br />Before it&#039;s done I want the obstacle tracker to have one more function - it should be able to identify when the obstacle is in fact a creature blocking its way. When a huge green lizard is sitting in an opening and a tiny blue one is pushing and pushing in vain to get through, it seems kind of unreasonable for it to assume that &quot;it must be something wrong with this specific tile!&quot; Also, once the green lizard is gone, the blue one should really stop avoiding that tile. So I think a specific framework for being blocked by colliding in other objects might be in place.</div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#698">[Message link]</a></div></div><div class="sidebar"></div></div>
<br><br><hr><br><br>
<a name="699"></a><div class="container"><div class="sidebar"></div><div class="postbox"><div class="post"><table><td><img src="/Rain-World-Devlog/Images/JLJac.gif" class="pfp"/>&nbsp;&nbsp;&nbsp;</td><td><b><a href="https://forums.tigsource.com/index.php?topic=25183.msg1053905#msg1053905" target="_blank">JLJac on August 22, 2014, 11:03:03 AM:</a></b></td></table><br>Thanks! Yeah, there was a little bit of that in the old version. I don&#039;t want it to be too agonizing to watch them when injured, after all it&#039;s sort of unclear whether they are actually creatures like us capable of pain, but they should certainly react to injury in their behavior&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/hand-thumbsup-r.gif" alt="Hand Thumbs Up Right" border="0" /><br /><br /><b>Update 295</b><br /><br />Oh wow. Today was spent in vain. But it was awesome! But it was in vain. Basically I did what I do best, spent way too much time on monstrously complex AI machinery that no-one will ever notice.<br /><br />Remember yesterday, when I talked about an obstacle tracker for other game objects? That&#039;s what I did, basically. The idea is pretty simple: On a &quot;movement failed&quot; call, first check if you have collided with any other creatures these last couple of frames. If so, don&#039;t write to the obstacle map (the one showed in the last post, where the lizard was able to figure out that climbing wasn&#039;t going to work after a couple of tries), but instead call the Obstacle Object Tracker, telling it which object you were supposedly blocked by.<br /><br />The Obstacle Object Tracker has a list of suspected obstacle objects. It checks against that list, and if the object is already in there, it adds to a Reports integer. After a certain number of reports, the object is moved to the Confirmed Obstacles list. If it&#039;s not on the suspects list, it&#039;s added to it. All the suspects on the list that were not the right one this time around get a Lifetime counter decreased, and when it hits zero they are forgotten.<br /><br />Whenever the path finder is asking a tile for its pathing cost, the Confirmed Obstacles list is checked, and if any of them are hanging out in that particular area, the cost is increased.<br /><br />Simple enough!<br /><br />Then it comes to my no omniscience purism. Say I&#039;m a blue lizard. On my Confirmed Obstacles list is a green lizard, I&#039;ve bumped into him 5 times and am frankly a bit tired of him, so whenever I&#039;m pathing around the level I&#039;d prefer not to run in to him again.<br /><br />But... It was 240 frames ago since I saw him. And the creator of this little universe doesn&#039;t like omniscient AI, so I can&#039;t just ask the game engine for the position of the green lizard. Contrary, I have an AI component used for just that, the Tracker from a few pages back. I can ask the tracker where I <i>think </i>another creature is, but never ask for its position straight up. <br /><br />So the Obstacle Object Tracker needs to be hooked up to the Tracker, with each object on the Confirmed Obstacles list having a reference to a Tracker ghost, so it can use that creature&#039;s supposed position when asking what tiles to avoid.<br /><br />Problem is, that I don&#039;t want to have every creature track every creature - some creatures are not interested in each other as neither eat the other, and it would be total overkill for all of them to run 12 ghosts for every other for no reason. So I needed to make it so that when an object is moved from the Suspected Obstacles list to the Confirmed Obstacles list, the Tracker gets a call. The Tracker looks through its ghosts, and if it finds one for the obstacle creature, it returns it to the Obstacle Object Tracker to be stored. If it doesn&#039;t, the &quot;A creature has been spotted&quot; method is called, and a ghost is created and returned. In short, the tracker will start tracking that creature despite it being disinteresting because it has become interesting in the role of a physical obstacle to avoid.<br /><br />[/insanity]<br /><br />This means, if we return to the blue and the green lizard, that at this point a blue lizard can chose another path to its target because it&#039;s dodging a <i>misconception </i>of where it expects the green lizard to be. o_0<br /><br />Do you think this comes across to the player? Hahahahahaha nooooooo it doesn&#039;t. But it was fun, and now it&#039;s in there, useful or not. At least it has helped dissolve huge knots of lizards being stuck in each other.<br /><br />It does create some cool behavior though. When a big bunch of lizards are moving towards you, some of them will strategically take alternate routes as to not get stuck behind the crowd. This indirectly leads to some surrounding behavior that can be pretty nice. But boy, could it be done with simpler methods&nbsp; <img src="/Rain-World-Devlog/Images/Smileys/cheesy.gif" alt="Cheesy" border="0" /></div><div class="messagelink">&nbsp;&nbsp;&nbsp;<a href="/Rain-World-Devlog/Pages/035#699">[Message link]</a></div></div><div class="sidebar"></div></div><br></body>